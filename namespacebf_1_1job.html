<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BluFedora Job System: bf::job Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BluFedora Job System<span id="projectnumber">&#160;v1.0.0</span>
   </div>
   <div id="projectbrief">This is a C++ job system library for use in game engines.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacebf_1_1job.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">bf::job Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacebf_1_1job_1_1detail"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job_1_1detail.html">detail</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbf_1_1job_1_1_count_splitter.html">CountSplitter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbf_1_1job_1_1_data_size_splitter.html">DataSizeSplitter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbf_1_1job_1_1index__iterator.html">index_iterator</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Range of indices to iterator over.  <a href="structbf_1_1job_1_1index__iterator.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbf_1_1job_1_1_index_range.html">IndexRange</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbf_1_1job_1_1_job_system.html">JobSystem</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structbf_1_1job_1_1_job_system_create_options"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#structbf_1_1job_1_1_job_system_create_options">JobSystemCreateOptions</a></td></tr>
<tr class="memdesc:structbf_1_1job_1_1_job_system_create_options"><td class="mdescLeft">&#160;</td><td class="mdescRight">The runtime configuration for the Job System.  <a href="namespacebf_1_1job.html#structbf_1_1job_1_1_job_system_create_options">More...</a><br /></td></tr>
<tr class="separator:structbf_1_1job_1_1_job_system_create_options"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbf_1_1job_1_1_static_count_splitter.html">StaticCountSplitter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbf_1_1job_1_1_static_data_size_splitter.html">StaticDataSizeSplitter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A single 'job' to be run by this system.  <a href="structbf_1_1job_1_1_task.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structbf_1_1job_1_1_task_data"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#structbf_1_1job_1_1_task_data">TaskData</a></td></tr>
<tr class="memdesc:structbf_1_1job_1_1_task_data"><td class="mdescLeft">&#160;</td><td class="mdescRight">A buffer for user-data you can write to, maybe large enough to store task data inline.  <a href="namespacebf_1_1job.html#structbf_1_1job_1_1_task_data">More...</a><br /></td></tr>
<tr class="separator:structbf_1_1job_1_1_task_data"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbf_1_1job_1_1_task_pool.html">TaskPool</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbf_1_1job_1_1_task_ptr.html">TaskPtr</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbf_1_1job_1_1_thread_worker.html">ThreadWorker</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a578698ca919202a8ec0473dd4f6c5b81"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a> = std::uint16_t</td></tr>
<tr class="memdesc:a578698ca919202a8ec0473dd4f6c5b81"><td class="mdescLeft">&#160;</td><td class="mdescRight">The id type of each worker thread.  <a href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">More...</a><br /></td></tr>
<tr class="separator:a578698ca919202a8ec0473dd4f6c5b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae80841b2f4f6b256e5c7c3b2e4c2c541"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#ae80841b2f4f6b256e5c7c3b2e4c2c541">TaskFn</a> = void(*)(<a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *)</td></tr>
<tr class="memdesc:ae80841b2f4f6b256e5c7c3b2e4c2c541"><td class="mdescLeft">&#160;</td><td class="mdescRight">The signature of the type of function for a single <a class="el" href="structbf_1_1job_1_1_task.html" title="A single &#39;job&#39; to be run by this system.">Task</a>.  <a href="namespacebf_1_1job.html#ae80841b2f4f6b256e5c7c3b2e4c2c541">More...</a><br /></td></tr>
<tr class="separator:ae80841b2f4f6b256e5c7c3b2e4c2c541"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8950eddf68eeb5563079a6239f70652e"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a8950eddf68eeb5563079a6239f70652e">TaskHandle</a> = std::uint16_t</td></tr>
<tr class="separator:a8950eddf68eeb5563079a6239f70652e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a967b829249d237baa271bd67d75febe2"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a967b829249d237baa271bd67d75febe2">TaskHandleType</a> = <a class="el" href="namespacebf_1_1job.html#a8950eddf68eeb5563079a6239f70652e">TaskHandle</a></td></tr>
<tr class="separator:a967b829249d237baa271bd67d75febe2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbc317f5a07cc0255051aaaac726a41d"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#afbc317f5a07cc0255051aaaac726a41d">WorkerIDType</a> = <a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a></td></tr>
<tr class="separator:afbc317f5a07cc0255051aaaac726a41d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c1d844a04b0a84ca45b9d4865ada908"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a5c1d844a04b0a84ca45b9d4865ada908">AtomicTaskPtr</a> = std::atomic&lt; <a class="el" href="structbf_1_1job_1_1_task_ptr.html">TaskPtr</a> &gt;</td></tr>
<tr class="separator:a5c1d844a04b0a84ca45b9d4865ada908"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a1bf27cadcb5355b162b1fb2af1978dc9"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a> : std::uint8_t { <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a1e23852820b9154316c7c06e2b7ba051">NORMAL</a> = 0
, <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a186495f7da296bf880df3a22a492b378">MAIN</a> = 1
, <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a87ed58ce5596142e11cb65deb049bb4b">BACKGROUND</a> = 2
 }</td></tr>
<tr class="memdesc:a1bf27cadcb5355b162b1fb2af1978dc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The priority that you want a task to run at.  <a href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">More...</a><br /></td></tr>
<tr class="separator:a1bf27cadcb5355b162b1fb2af1978dc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a569f46928160d2ff793d9acbafd35277"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a569f46928160d2ff793d9acbafd35277">numSystemThreads</a> () noexcept</td></tr>
<tr class="memdesc:a569f46928160d2ff793d9acbafd35277"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes some system calls to grab the number threads / processors on the device. This function can be called by any thread concurrently.  <a href="namespacebf_1_1job.html#a569f46928160d2ff793d9acbafd35277">More...</a><br /></td></tr>
<tr class="separator:a569f46928160d2ff793d9acbafd35277"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dbd834ed11bc519b59ebf14d42f7440"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a1dbd834ed11bc519b59ebf14d42f7440">initialize</a> (const <a class="el" href="namespacebf_1_1job.html#structbf_1_1job_1_1_job_system_create_options">JobSystemCreateOptions</a> &amp;params={0u}) noexcept</td></tr>
<tr class="memdesc:a1dbd834ed11bc519b59ebf14d42f7440"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up the Job system and creates all the worker threads. The thread that calls 'bfJob::initialize' is considered (and should be) the main thread.  <a href="namespacebf_1_1job.html#a1dbd834ed11bc519b59ebf14d42f7440">More...</a><br /></td></tr>
<tr class="separator:a1dbd834ed11bc519b59ebf14d42f7440"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa230de6f107416403da55c56ff39c600"><td class="memItemLeft" align="right" valign="top">std::uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#aa230de6f107416403da55c56ff39c600">numWorkers</a> () noexcept</td></tr>
<tr class="memdesc:aa230de6f107416403da55c56ff39c600"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of workers created by the system. This function can be called by any thread concurrently.  <a href="namespacebf_1_1job.html#aa230de6f107416403da55c56ff39c600">More...</a><br /></td></tr>
<tr class="separator:aa230de6f107416403da55c56ff39c600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9edb9cb3acc7877cbb87a66137467c9"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#ae9edb9cb3acc7877cbb87a66137467c9">processorArchitectureName</a> () noexcept</td></tr>
<tr class="memdesc:ae9edb9cb3acc7877cbb87a66137467c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">An implementation defined name for the CPU architecture of the device. This function can be called by any thread concurrently.  <a href="namespacebf_1_1job.html#ae9edb9cb3acc7877cbb87a66137467c9">More...</a><br /></td></tr>
<tr class="separator:ae9edb9cb3acc7877cbb87a66137467c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b7bca473a7040c5234ebba1fe6cb031"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a2b7bca473a7040c5234ebba1fe6cb031">currentWorker</a> () noexcept</td></tr>
<tr class="memdesc:a2b7bca473a7040c5234ebba1fe6cb031"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current id of the current thread. This function can be called by any thread concurrently.  <a href="namespacebf_1_1job.html#a2b7bca473a7040c5234ebba1fe6cb031">More...</a><br /></td></tr>
<tr class="separator:a2b7bca473a7040c5234ebba1fe6cb031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8518fcec0a8301682d27c92d93495e84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a8518fcec0a8301682d27c92d93495e84">tick</a> ()</td></tr>
<tr class="memdesc:a8518fcec0a8301682d27c92d93495e84"><td class="mdescLeft">&#160;</td><td class="mdescRight">This should be called as frequently as you want the main thread's queue to be flushed.  <a href="namespacebf_1_1job.html#a8518fcec0a8301682d27c92d93495e84">More...</a><br /></td></tr>
<tr class="separator:a8518fcec0a8301682d27c92d93495e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f005788a248d99a196608b5727b8bcd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a0f005788a248d99a196608b5727b8bcd">shutdown</a> () noexcept</td></tr>
<tr class="memdesc:a0f005788a248d99a196608b5727b8bcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This will deallocate any memory used by the system and shutdown any threads created by 'bfJob::initialize'.  <a href="namespacebf_1_1job.html#a0f005788a248d99a196608b5727b8bcd">More...</a><br /></td></tr>
<tr class="separator:a0f005788a248d99a196608b5727b8bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b82edd0c4dbead425152cf008ec532"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a34b82edd0c4dbead425152cf008ec532">taskMake</a> (<a class="el" href="namespacebf_1_1job.html#ae80841b2f4f6b256e5c7c3b2e4c2c541">TaskFn</a> function, <a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const parent=nullptr) noexcept</td></tr>
<tr class="memdesc:a34b82edd0c4dbead425152cf008ec532"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new <a class="el" href="structbf_1_1job_1_1_task.html" title="A single &#39;job&#39; to be run by this system.">Task</a> that should be later submitted by calling 'taskSubmit'.  <a href="namespacebf_1_1job.html#a34b82edd0c4dbead425152cf008ec532">More...</a><br /></td></tr>
<tr class="separator:a34b82edd0c4dbead425152cf008ec532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a921c7746e85094422d49fe193a523612"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacebf_1_1job.html#structbf_1_1job_1_1_task_data">TaskData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a921c7746e85094422d49fe193a523612">taskGetData</a> (<a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const task) noexcept</td></tr>
<tr class="memdesc:a921c7746e85094422d49fe193a523612"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns you the user-data buffer you way write to get data into your TaskFn.  <a href="namespacebf_1_1job.html#a921c7746e85094422d49fe193a523612">More...</a><br /></td></tr>
<tr class="separator:a921c7746e85094422d49fe193a523612"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59f5325afedfb4a33100a2d87ad45ed9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a59f5325afedfb4a33100a2d87ad45ed9">taskAddContinuation</a> (<a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const self, <a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const continuation) noexcept</td></tr>
<tr class="memdesc:a59f5325afedfb4a33100a2d87ad45ed9"><td class="mdescLeft">&#160;</td><td class="mdescRight">A 'continuation' is a task that will be added to a queue after the 'self' <a class="el" href="structbf_1_1job_1_1_task.html" title="A single &#39;job&#39; to be run by this system.">Task</a> has finished running.  <a href="namespacebf_1_1job.html#a59f5325afedfb4a33100a2d87ad45ed9">More...</a><br /></td></tr>
<tr class="separator:a59f5325afedfb4a33100a2d87ad45ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d8571034c2aff8664cbffc8de3e9d22"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a9d8571034c2aff8664cbffc8de3e9d22">taskSubmit</a> (<a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const self, <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a> queue=<a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a1e23852820b9154316c7c06e2b7ba051">QueueType::NORMAL</a>) noexcept</td></tr>
<tr class="memdesc:a9d8571034c2aff8664cbffc8de3e9d22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submits the task to the specified queue.  <a href="namespacebf_1_1job.html#a9d8571034c2aff8664cbffc8de3e9d22">More...</a><br /></td></tr>
<tr class="separator:a9d8571034c2aff8664cbffc8de3e9d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb85604e4d907f4190c55d798c628982"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:abb85604e4d907f4190c55d798c628982"><td class="memTemplItemLeft" align="right" valign="top">T &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#abb85604e4d907f4190c55d798c628982">taskDataAs</a> (<a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const task) noexcept</td></tr>
<tr class="memdesc:abb85604e4d907f4190c55d798c628982"><td class="mdescLeft">&#160;</td><td class="mdescRight">Grabs the user-data pointer as the T you specified. No safety is guaranteed, this is just a dumb cast.  <a href="namespacebf_1_1job.html#abb85604e4d907f4190c55d798c628982">More...</a><br /></td></tr>
<tr class="separator:abb85604e4d907f4190c55d798c628982"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef7643eed8577eaad7b9dad4e887fdca"><td class="memTemplParams" colspan="2">template&lt;typename T , typename... Args&gt; </td></tr>
<tr class="memitem:aef7643eed8577eaad7b9dad4e887fdca"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#aef7643eed8577eaad7b9dad4e887fdca">taskEmplaceData</a> (<a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const task, Args &amp;&amp;... args)</td></tr>
<tr class="memdesc:aef7643eed8577eaad7b9dad4e887fdca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the constructor of T on the user-data buffer.  <a href="namespacebf_1_1job.html#aef7643eed8577eaad7b9dad4e887fdca">More...</a><br /></td></tr>
<tr class="separator:aef7643eed8577eaad7b9dad4e887fdca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af57f75705be9ca98403dd7181c6744b6"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:af57f75705be9ca98403dd7181c6744b6"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#af57f75705be9ca98403dd7181c6744b6">taskSetData</a> (<a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const task, const T &amp;data)</td></tr>
<tr class="memdesc:af57f75705be9ca98403dd7181c6744b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies 'data' into the user-data buffer by calling the T copy constructor.  <a href="namespacebf_1_1job.html#af57f75705be9ca98403dd7181c6744b6">More...</a><br /></td></tr>
<tr class="separator:af57f75705be9ca98403dd7181c6744b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af43aa7fb7429e273b2776523f84499be"><td class="memTemplParams" colspan="2">template&lt;typename Closure &gt; </td></tr>
<tr class="memitem:af43aa7fb7429e273b2776523f84499be"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#af43aa7fb7429e273b2776523f84499be">taskMake</a> (Closure &amp;&amp;function, <a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const parent=nullptr)</td></tr>
<tr class="memdesc:af43aa7fb7429e273b2776523f84499be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new task making a copy of the closure.  <a href="namespacebf_1_1job.html#af43aa7fb7429e273b2776523f84499be">More...</a><br /></td></tr>
<tr class="separator:af43aa7fb7429e273b2776523f84499be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16013b6b11e1be5fc9f92ddc8ebe682b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a16013b6b11e1be5fc9f92ddc8ebe682b">taskIncRef</a> (<a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const task)</td></tr>
<tr class="memdesc:a16013b6b11e1be5fc9f92ddc8ebe682b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments the task's ref count preventing it from being garbage collected.  <a href="namespacebf_1_1job.html#a16013b6b11e1be5fc9f92ddc8ebe682b">More...</a><br /></td></tr>
<tr class="separator:a16013b6b11e1be5fc9f92ddc8ebe682b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a319ff8e231fce83f3990cfc703675f95"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a319ff8e231fce83f3990cfc703675f95">taskDecRef</a> (<a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const task)</td></tr>
<tr class="memdesc:a319ff8e231fce83f3990cfc703675f95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrements the task's ref count allow it to be garbage collected.  <a href="namespacebf_1_1job.html#a319ff8e231fce83f3990cfc703675f95">More...</a><br /></td></tr>
<tr class="separator:a319ff8e231fce83f3990cfc703675f95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5175f1552d04cf66c93fbf126769ca6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#ac5175f1552d04cf66c93fbf126769ca6">taskIsDone</a> (const <a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const task) noexcept</td></tr>
<tr class="memdesc:ac5175f1552d04cf66c93fbf126769ca6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the done status of the task.  <a href="namespacebf_1_1job.html#ac5175f1552d04cf66c93fbf126769ca6">More...</a><br /></td></tr>
<tr class="separator:ac5175f1552d04cf66c93fbf126769ca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a384cbecfdf7aaa8629c6afb2ef0d90ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a384cbecfdf7aaa8629c6afb2ef0d90ae">workerGC</a> ()</td></tr>
<tr class="memdesc:a384cbecfdf7aaa8629c6afb2ef0d90ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Garbage collects tasks allocated on the current worker.  <a href="namespacebf_1_1job.html#a384cbecfdf7aaa8629c6afb2ef0d90ae">More...</a><br /></td></tr>
<tr class="separator:a384cbecfdf7aaa8629c6afb2ef0d90ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6af1eef961e26e6cbdf84dd01d86a619"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a6af1eef961e26e6cbdf84dd01d86a619">waitOnTask</a> (const <a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const task) noexcept</td></tr>
<tr class="memdesc:a6af1eef961e26e6cbdf84dd01d86a619"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits until the specified <code>task</code> is done executing. This function will block but do work while being blocked so there is no wasted time.  <a href="namespacebf_1_1job.html#a6af1eef961e26e6cbdf84dd01d86a619">More...</a><br /></td></tr>
<tr class="separator:a6af1eef961e26e6cbdf84dd01d86a619"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca43dbd44d354a1e2aa1e9b16efe602"><td class="memTemplParams" colspan="2">template&lt;typename F , typename S &gt; </td></tr>
<tr class="memitem:a4ca43dbd44d354a1e2aa1e9b16efe602"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a4ca43dbd44d354a1e2aa1e9b16efe602">parallel_for</a> (const std::size_t start, const std::size_t count, S &amp;&amp;splitter, F &amp;&amp;fn, <a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *parent=nullptr)</td></tr>
<tr class="memdesc:a4ca43dbd44d354a1e2aa1e9b16efe602"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parallel for algorithm, splits the work up recursively spliting based on the <code>splitter</code> passed in.  <a href="namespacebf_1_1job.html#a4ca43dbd44d354a1e2aa1e9b16efe602">More...</a><br /></td></tr>
<tr class="separator:a4ca43dbd44d354a1e2aa1e9b16efe602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada994a5d80a85361eb84532b8a098b70"><td class="memTemplParams" colspan="2">template&lt;typename T , typename F , typename S &gt; </td></tr>
<tr class="memitem:ada994a5d80a85361eb84532b8a098b70"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#ada994a5d80a85361eb84532b8a098b70">parallel_for</a> (T *const data, const std::size_t count, S &amp;&amp;splitter, F &amp;&amp;fn, <a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *parent=nullptr)</td></tr>
<tr class="memdesc:ada994a5d80a85361eb84532b8a098b70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parallel for algorithm, splits the work up recursively spliting based on the <code>splitter</code> passed in.  <a href="namespacebf_1_1job.html#ada994a5d80a85361eb84532b8a098b70">More...</a><br /></td></tr>
<tr class="separator:ada994a5d80a85361eb84532b8a098b70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a008a5ea3f69205f8c2dd07d4645f344e"><td class="memTemplParams" colspan="2">template&lt;typename... F&gt; </td></tr>
<tr class="memitem:a008a5ea3f69205f8c2dd07d4645f344e"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a008a5ea3f69205f8c2dd07d4645f344e">parallel_invoke</a> (<a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const parent, F &amp;&amp;... fns)</td></tr>
<tr class="memdesc:a008a5ea3f69205f8c2dd07d4645f344e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invokes each passed in function object in parallel.  <a href="namespacebf_1_1job.html#a008a5ea3f69205f8c2dd07d4645f344e">More...</a><br /></td></tr>
<tr class="separator:a008a5ea3f69205f8c2dd07d4645f344e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d19ffe37dfe4b108e49920545957912"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a3d19ffe37dfe4b108e49920545957912">taskPtrToPointer</a> (<a class="el" href="structbf_1_1job_1_1_task_ptr.html">TaskPtr</a> ptr) noexcept</td></tr>
<tr class="separator:a3d19ffe37dfe4b108e49920545957912"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fb4aaef1245850e67605cbd69222b00"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a8fb4aaef1245850e67605cbd69222b00">initThreadWorkerID</a> () noexcept</td></tr>
<tr class="separator:a8fb4aaef1245850e67605cbd69222b00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a291d4a5da74e434cc85514cca213ec72"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a291d4a5da74e434cc85514cca213ec72">clampThreadCount</a> (<a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a> value, <a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a> min, <a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a> max)</td></tr>
<tr class="separator:a291d4a5da74e434cc85514cca213ec72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26d9d7e71f60828db101a6e8ba474741"><td class="memTemplParams" colspan="2">template&lt;typename <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a> &gt; </td></tr>
<tr class="memitem:a26d9d7e71f60828db101a6e8ba474741"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a26d9d7e71f60828db101a6e8ba474741">taskSubmitQPushHelper</a> (<a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const self, const <a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a> worker_id, <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a> &amp;queue)</td></tr>
<tr class="separator:a26d9d7e71f60828db101a6e8ba474741"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a494b3014635f3e97c1fdf626b236117b"><td class="memItemLeft" align="right" valign="top">static constexpr std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a494b3014635f3e97c1fdf626b236117b">k_MainQueueSize</a> = 128</td></tr>
<tr class="memdesc:a494b3014635f3e97c1fdf626b236117b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of tasks that can be contained in the main queue.  <a href="namespacebf_1_1job.html#a494b3014635f3e97c1fdf626b236117b">More...</a><br /></td></tr>
<tr class="separator:a494b3014635f3e97c1fdf626b236117b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ec37950a885a28333f4a56868b9a07b"><td class="memItemLeft" align="right" valign="top">static constexpr std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a9ec37950a885a28333f4a56868b9a07b">k_NormalQueueSize</a> = 4096</td></tr>
<tr class="memdesc:a9ec37950a885a28333f4a56868b9a07b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of tasks that can be contained in each worker's high priority queue.  <a href="namespacebf_1_1job.html#a9ec37950a885a28333f4a56868b9a07b">More...</a><br /></td></tr>
<tr class="separator:a9ec37950a885a28333f4a56868b9a07b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbbd94aff6cd64ac8fa998309592d8a2"><td class="memItemLeft" align="right" valign="top">static constexpr std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#acbbd94aff6cd64ac8fa998309592d8a2">k_BackgroundQueueSize</a> = 512</td></tr>
<tr class="memdesc:acbbd94aff6cd64ac8fa998309592d8a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of tasks that can be contained in each worker's low priority queue.  <a href="namespacebf_1_1job.html#acbbd94aff6cd64ac8fa998309592d8a2">More...</a><br /></td></tr>
<tr class="separator:acbbd94aff6cd64ac8fa998309592d8a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f32cd8117952ffa2c8772faa3d9acd7"><td class="memItemLeft" align="right" valign="top">static constexpr std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a9f32cd8117952ffa2c8772faa3d9acd7">k_MaxThreadsSupported</a> = 32</td></tr>
<tr class="memdesc:a9f32cd8117952ffa2c8772faa3d9acd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum number of threads that can be created, this is so that the library can be non dynamically allocating.  <a href="namespacebf_1_1job.html#a9f32cd8117952ffa2c8772faa3d9acd7">More...</a><br /></td></tr>
<tr class="separator:a9f32cd8117952ffa2c8772faa3d9acd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2f219351956ee01701e7652208a1757"><td class="memItemLeft" align="right" valign="top">static constexpr std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#ae2f219351956ee01701e7652208a1757">k_ExpectedTaskSize</a> = std::max({std::size_t(128u), std::hardware_constructive_interference_size, std::hardware_destructive_interference_size})</td></tr>
<tr class="separator:ae2f219351956ee01701e7652208a1757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a632f29d428e3f8e61f50dc5b83724c98"><td class="memItemLeft" align="right" valign="top">static constexpr std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a632f29d428e3f8e61f50dc5b83724c98">k_MaxTasksPerWorker</a> = <a class="el" href="namespacebf_1_1job.html#a9ec37950a885a28333f4a56868b9a07b">k_NormalQueueSize</a> + <a class="el" href="namespacebf_1_1job.html#acbbd94aff6cd64ac8fa998309592d8a2">k_BackgroundQueueSize</a></td></tr>
<tr class="separator:a632f29d428e3f8e61f50dc5b83724c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6525dfa22a68b1011e5ef1e86be52b75"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a6525dfa22a68b1011e5ef1e86be52b75">k_MainThreadID</a> = 0</td></tr>
<tr class="separator:a6525dfa22a68b1011e5ef1e86be52b75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4743caff1b0745ed1704bae6e7d51d0"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#ac4743caff1b0745ed1704bae6e7d51d0">k_InvalidQueueType</a> = <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a>(int(<a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a87ed58ce5596142e11cb65deb049bb4b">QueueType::BACKGROUND</a>) + 1)</td></tr>
<tr class="separator:ac4743caff1b0745ed1704bae6e7d51d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b89b0b4d5ea7b4eba8b638b9a21f564"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="namespacebf_1_1job.html#a8950eddf68eeb5563079a6239f70652e">TaskHandle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebf_1_1job.html#a2b89b0b4d5ea7b4eba8b638b9a21f564">NullTaskHandle</a> = std::numeric_limits&lt;<a class="el" href="namespacebf_1_1job.html#a8950eddf68eeb5563079a6239f70652e">TaskHandle</a>&gt;::max()</td></tr>
<tr class="separator:a2b89b0b4d5ea7b4eba8b638b9a21f564"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Class Documentation</h2>
<a name="structbf_1_1job_1_1_job_system_create_options" id="structbf_1_1job_1_1_job_system_create_options"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structbf_1_1job_1_1_job_system_create_options">&#9670;&nbsp;</a></span>bf::job::JobSystemCreateOptions</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct bf::job::JobSystemCreateOptions</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p >The runtime configuration for the Job System. </p>

<p class="definition">Definition at line <a class="el" href="bf__job__api_8hpp_source.html#l00071">71</a> of file <a class="el" href="bf__job__api_8hpp_source.html">bf_job_api.hpp</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a114aadc5c9276a01b135777528d9f356" name="a114aadc5c9276a01b135777528d9f356"></a>size_t</td>
<td class="fieldname">
num_threads</td>
<td class="fielddoc">
Use 0 to indicate using the number of cores available on the system. </td></tr>
</table>

</div>
</div>
<a name="structbf_1_1job_1_1_task_data" id="structbf_1_1job_1_1_task_data"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structbf_1_1job_1_1_task_data">&#9670;&nbsp;</a></span>bf::job::TaskData</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct bf::job::TaskData</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p >A buffer for user-data you can write to, maybe large enough to store task data inline. </p>
<p >If you store non trivial data remember to manually call it's destructor at the end of the task function.</p>
<p >If you call 'taskEmplaceData' or 'taskSetData' and need to update the data once more be sure to destruct the previous contents correctly if the data stored in the buffer is non trivial. </p>

<p class="definition">Definition at line <a class="el" href="bf__job__api_8hpp_source.html#l00163">163</a> of file <a class="el" href="bf__job__api_8hpp_source.html">bf_job_api.hpp</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a25348a17d7317b42b3fc6a9f55ff70c7" name="a25348a17d7317b42b3fc6a9f55ff70c7"></a>void *</td>
<td class="fieldname">
ptr</td>
<td class="fielddoc">
The start of the buffer you may write to. </td></tr>
<tr><td class="fieldtype">
<a id="aa34099e0efbbeeaa2b2ba98d4e6cabcf" name="aa34099e0efbbeeaa2b2ba98d4e6cabcf"></a>size_t</td>
<td class="fieldname">
size</td>
<td class="fielddoc">
The size of the buffer. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a578698ca919202a8ec0473dd4f6c5b81" name="a578698ca919202a8ec0473dd4f6c5b81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a578698ca919202a8ec0473dd4f6c5b81">&#9670;&nbsp;</a></span>WorkerID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">bf::job::WorkerID</a> = typedef std::uint16_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The id type of each worker thread. </p>

<p class="definition">Definition at line <a class="el" href="bf__job__api_8hpp_source.html#l00052">52</a> of file <a class="el" href="bf__job__api_8hpp_source.html">bf_job_api.hpp</a>.</p>

</div>
</div>
<a id="ae80841b2f4f6b256e5c7c3b2e4c2c541" name="ae80841b2f4f6b256e5c7c3b2e4c2c541"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae80841b2f4f6b256e5c7c3b2e4c2c541">&#9670;&nbsp;</a></span>TaskFn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespacebf_1_1job.html#ae80841b2f4f6b256e5c7c3b2e4c2c541">bf::job::TaskFn</a> = typedef void (*)(<a class="el" href="structbf_1_1job_1_1_task.html">Task</a>*)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The signature of the type of function for a single <a class="el" href="structbf_1_1job_1_1_task.html" title="A single &#39;job&#39; to be run by this system.">Task</a>. </p>

<p class="definition">Definition at line <a class="el" href="bf__job__api_8hpp_source.html#l00053">53</a> of file <a class="el" href="bf__job__api_8hpp_source.html">bf_job_api.hpp</a>.</p>

</div>
</div>
<a id="a8950eddf68eeb5563079a6239f70652e" name="a8950eddf68eeb5563079a6239f70652e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8950eddf68eeb5563079a6239f70652e">&#9670;&nbsp;</a></span>TaskHandle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespacebf_1_1job.html#a8950eddf68eeb5563079a6239f70652e">bf::job::TaskHandle</a> = typedef std::uint16_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00105">105</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>

</div>
</div>
<a id="a967b829249d237baa271bd67d75febe2" name="a967b829249d237baa271bd67d75febe2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a967b829249d237baa271bd67d75febe2">&#9670;&nbsp;</a></span>TaskHandleType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespacebf_1_1job.html#a967b829249d237baa271bd67d75febe2">bf::job::TaskHandleType</a> = typedef <a class="el" href="namespacebf_1_1job.html#a8950eddf68eeb5563079a6239f70652e">TaskHandle</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00106">106</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>

</div>
</div>
<a id="afbc317f5a07cc0255051aaaac726a41d" name="afbc317f5a07cc0255051aaaac726a41d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbc317f5a07cc0255051aaaac726a41d">&#9670;&nbsp;</a></span>WorkerIDType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespacebf_1_1job.html#afbc317f5a07cc0255051aaaac726a41d">bf::job::WorkerIDType</a> = typedef <a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00107">107</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>

</div>
</div>
<a id="a5c1d844a04b0a84ca45b9d4865ada908" name="a5c1d844a04b0a84ca45b9d4865ada908"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c1d844a04b0a84ca45b9d4865ada908">&#9670;&nbsp;</a></span>AtomicTaskPtr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespacebf_1_1job.html#a5c1d844a04b0a84ca45b9d4865ada908">bf::job::AtomicTaskPtr</a> = typedef std::atomic&lt;<a class="el" href="structbf_1_1job_1_1_task_ptr.html">TaskPtr</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00134">134</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a1bf27cadcb5355b162b1fb2af1978dc9" name="a1bf27cadcb5355b162b1fb2af1978dc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bf27cadcb5355b162b1fb2af1978dc9">&#9670;&nbsp;</a></span>QueueType</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">bf::job::QueueType</a> : std::uint8_t</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The priority that you want a task to run at. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a1bf27cadcb5355b162b1fb2af1978dc9a1e23852820b9154316c7c06e2b7ba051" name="a1bf27cadcb5355b162b1fb2af1978dc9a1e23852820b9154316c7c06e2b7ba051"></a>NORMAL&#160;</td><td class="fielddoc"><p >Normally you will want tasks to go into this queue, Tasks in this queue will run on either the main or worker threads. </p>
</td></tr>
<tr><td class="fieldname"><a id="a1bf27cadcb5355b162b1fb2af1978dc9a186495f7da296bf880df3a22a492b378" name="a1bf27cadcb5355b162b1fb2af1978dc9a186495f7da296bf880df3a22a492b378"></a>MAIN&#160;</td><td class="fielddoc"><p >Use this value when you need a certain task to be run specifically by the main thread. </p>
</td></tr>
<tr><td class="fieldname"><a id="a1bf27cadcb5355b162b1fb2af1978dc9a87ed58ce5596142e11cb65deb049bb4b" name="a1bf27cadcb5355b162b1fb2af1978dc9a87ed58ce5596142e11cb65deb049bb4b"></a>BACKGROUND&#160;</td><td class="fielddoc"><p >Low priority, good for asset loading. Tasks in this queue will never run on the main thread. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="bf__job__api_8hpp_source.html#l00043">43</a> of file <a class="el" href="bf__job__api_8hpp_source.html">bf_job_api.hpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    {</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>      <a class="code hl_enumvalue" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a1e23852820b9154316c7c06e2b7ba051">NORMAL</a>     = 0,  </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>      <a class="code hl_enumvalue" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a186495f7da296bf880df3a22a492b378">MAIN</a>       = 1,  </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>      <a class="code hl_enumvalue" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a87ed58ce5596142e11cb65deb049bb4b">BACKGROUND</a> = 2,  </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    };</div>
<div class="ttc" id="anamespacebf_1_1job_html_a1bf27cadcb5355b162b1fb2af1978dc9a186495f7da296bf880df3a22a492b378"><div class="ttname"><a href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a186495f7da296bf880df3a22a492b378">bf::job::QueueType::MAIN</a></div><div class="ttdeci">@ MAIN</div><div class="ttdoc">Use this value when you need a certain task to be run specifically by the main thread.</div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a1bf27cadcb5355b162b1fb2af1978dc9a1e23852820b9154316c7c06e2b7ba051"><div class="ttname"><a href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a1e23852820b9154316c7c06e2b7ba051">bf::job::QueueType::NORMAL</a></div><div class="ttdeci">@ NORMAL</div><div class="ttdoc">Normally you will want tasks to go into this queue, Tasks in this queue will run on either the main o...</div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a1bf27cadcb5355b162b1fb2af1978dc9a87ed58ce5596142e11cb65deb049bb4b"><div class="ttname"><a href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a87ed58ce5596142e11cb65deb049bb4b">bf::job::QueueType::BACKGROUND</a></div><div class="ttdeci">@ BACKGROUND</div><div class="ttdoc">Low priority, good for asset loading. Tasks in this queue will never run on the main thread.</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a569f46928160d2ff793d9acbafd35277" name="a569f46928160d2ff793d9acbafd35277"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a569f46928160d2ff793d9acbafd35277">&#9670;&nbsp;</a></span>numSystemThreads()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t bf::job::numSystemThreads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes some system calls to grab the number threads / processors on the device. This function can be called by any thread concurrently. </p>
<p >Can be called before and after job system initialization.</p>
<dl class="section return"><dt>Returns</dt><dd>std::size_t The number threads / processors on the computer. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00347">347</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span><span class="preprocessor">#if IS_WINDOWS</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>      SYSTEM_INFO sysinfo;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>      GetSystemInfo(&amp;sysinfo);</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>      <span class="keywordflow">return</span> sysinfo.dwNumberOfProcessors;</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span><span class="preprocessor">#elif IS_POSIX</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>      <span class="keywordflow">return</span> sysconf(_SC_NPROCESSORS_ONLN) <span class="comment">/* * 2*/</span>;</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span><span class="preprocessor">#elif 0  </span><span class="comment">// FreeBSD, MacOS X, NetBSD, OpenBSD</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>      nt          mib[4];</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>      <span class="keywordtype">int</span>         numCPU;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>      std::size_t len = <span class="keyword">sizeof</span>(numCPU);</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span> </div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>      <span class="comment">/* set the mib for hw.ncpu */</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>      mib[0] = CTL_HW;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>      mib[1] = HW_AVAILCPU;  <span class="comment">// alternatively, try HW_NCPU;</span></div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>      <span class="comment">/* get the number of CPUs from the system */</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>      sysctl(mib, 2, &amp;numCPU, &amp;len, NULL, 0);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span> </div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>      <span class="keywordflow">if</span> (numCPU &lt; 1)</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>      {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        mib[1] = HW_NCPU;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        sysctl(mib, 2, &amp;numCPU, &amp;len, NULL, 0);</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <span class="keywordflow">if</span> (numCPU &lt; 1)</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>          numCPU = 1;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>      }</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span> </div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>      <span class="keywordflow">return</span> numCPU;</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span><span class="preprocessor">#elif 0  </span><span class="comment">// HPUX</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>      <span class="keywordflow">return</span> mpctl(MPC_GETNUMSPUS, NULL, NULL);</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span><span class="preprocessor">#elif 0  </span><span class="comment">// IRIX</span></div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>      <span class="keywordflow">return</span> sysconf(_SC_NPROC_ONLN);</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span><span class="preprocessor">#elif 0  </span><span class="comment">// Objective-C (Mac OS X &gt;=10.5 or iOS)</span></div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>      NSUInteger a = [[NSProcessInfo processInfo] processorCount];</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>      NSUInteger b = [[NSProcessInfo processInfo] activeProcessorCount];</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>      <span class="keywordflow">return</span> a;</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span><span class="preprocessor">#elif IS_SINGLE_THREADED</span></div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>      <span class="keyword">const</span> <span class="keyword">auto</span> n = std::thread::hardware_concurrency();</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>      <span class="keywordflow">return</span> (n) ? n : 8;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00393">initialize()</a>.</p>

</div>
</div>
<a id="a1dbd834ed11bc519b59ebf14d42f7440" name="a1dbd834ed11bc519b59ebf14d42f7440"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dbd834ed11bc519b59ebf14d42f7440">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void bf::job::initialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacebf_1_1job.html#structbf_1_1job_1_1_job_system_create_options">JobSystemCreateOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em> = <code>{0u}</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets up the Job system and creates all the worker threads. The thread that calls 'bfJob::initialize' is considered (and should be) the main thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>The customization parameters to initialize the system with. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00393">393</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    {</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(s_NextThreadLocalIndex == 0u, <span class="stringliteral">&quot;Job System must be shutdown before it can be initialized again.&quot;</span>);</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span> </div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a> num_threads = <a class="code hl_function" href="namespacebf_1_1job.html#a291d4a5da74e434cc85514cca213ec72">clampThreadCount</a>(<a class="code hl_typedef" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>(params.<a class="code hl_variable" href="namespacebf_1_1job.html#a114aadc5c9276a01b135777528d9f356">num_threads</a> ? params.<a class="code hl_variable" href="namespacebf_1_1job.html#a114aadc5c9276a01b135777528d9f356">num_threads</a> : <a class="code hl_function" href="namespacebf_1_1job.html#a569f46928160d2ff793d9acbafd35277">numSystemThreads</a>()), <a class="code hl_typedef" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>(1), <a class="code hl_typedef" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>(<a class="code hl_variable" href="namespacebf_1_1job.html#a9f32cd8117952ffa2c8772faa3d9acd7">k_MaxThreadsSupported</a>));</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span> </div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>      s_JobCtx.num_workers = num_threads;</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>      s_JobCtx.workers     = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_struct" href="structbf_1_1job_1_1_thread_worker.html">ThreadWorker</a>*<span class="keyword">&gt;</span>(s_JobCtx.worker_storage.data());</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span><span class="preprocessor">#if JOB_SYS_DETERMINISTIC_JOB_STEAL</span></div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>      <span class="keyword">constexpr</span> std::uint64_t random_seed = 0u;</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>      <span class="keyword">const</span> std::uint64_t random_seed = <span class="keyword">static_cast&lt;</span>std::uint64_t<span class="keyword">&gt;</span>(rand());</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span> </div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>      <span class="keywordflow">for</span> (std::size_t i = 0; i &lt; num_threads; ++i)</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>      {</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        <a class="code hl_struct" href="structbf_1_1job_1_1_thread_worker.html">ThreadWorker</a>* <span class="keyword">const</span> worker = <span class="keyword">new</span> (s_JobCtx.workers + i) <a class="code hl_struct" href="structbf_1_1job_1_1_thread_worker.html">ThreadWorker</a>();</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span> </div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>        pcg32_srandom_r(&amp;worker-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_thread_worker.html#a676f8a7f17dca420d83fb80f0e0314af">rng_state</a>, std::uint64_t(i) + random_seed, std::uint64_t(i) * 2u + 1u + random_seed);</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span> </div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        worker-&gt;<a class="code hl_function" href="structbf_1_1job_1_1_thread_worker.html#ae780adaf6d7cdbfae184b5bea8ee7103">start</a>(i == <a class="code hl_variable" href="namespacebf_1_1job.html#a6525dfa22a68b1011e5ef1e86be52b75">k_MainThreadID</a>);</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>      }</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span> </div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>      s_IsFullyInitialized = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span> </div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span><span class="preprocessor">#if IS_WINDOWS</span></div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>      SYSTEM_INFO sysinfo;</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>      GetSystemInfo(&amp;sysinfo);</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span> </div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>      <span class="keywordflow">switch</span> (sysinfo.wProcessorArchitecture)</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>      {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        <span class="keywordflow">case</span> PROCESSOR_ARCHITECTURE_AMD64:</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        {</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>          s_JobCtx.sys_arch_str = <span class="stringliteral">&quot;x64 (Intel or AMD)&quot;</span>;</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>        }</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>        <span class="keywordflow">case</span> PROCESSOR_ARCHITECTURE_ARM:</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>        {</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>          s_JobCtx.sys_arch_str = <span class="stringliteral">&quot;ARM&quot;</span>;</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>        }</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        <span class="keywordflow">case</span> PROCESSOR_ARCHITECTURE_ARM64:</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>        {</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>          s_JobCtx.sys_arch_str = <span class="stringliteral">&quot;ARM64&quot;</span>;</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        }</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>        <span class="keywordflow">case</span> PROCESSOR_ARCHITECTURE_IA64:</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>        {</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>          s_JobCtx.sys_arch_str = <span class="stringliteral">&quot;Intel Itanium-Based&quot;</span>;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        }</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>        <span class="keywordflow">case</span> PROCESSOR_ARCHITECTURE_INTEL:</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>        {</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>          s_JobCtx.sys_arch_str = <span class="stringliteral">&quot;Intel x86&quot;</span>;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>        }</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>        <span class="keywordflow">case</span> PROCESSOR_ARCHITECTURE_UNKNOWN:</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>        {</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>          s_JobCtx.sys_arch_str = <span class="stringliteral">&quot;Unknown Arch&quot;</span>;</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        }</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>      }</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    }</div>
<div class="ttc" id="abf__job__system_8cpp_html_a3c45a50fae3515f1fa7aa7def616e68f"><div class="ttname"><a href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a></div><div class="ttdeci">#define JobAssert(expr, msg)</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00085">bf_job_system.cpp:85</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a114aadc5c9276a01b135777528d9f356"><div class="ttname"><a href="namespacebf_1_1job.html#a114aadc5c9276a01b135777528d9f356">bf::job::JobSystemCreateOptions::num_threads</a></div><div class="ttdeci">std::size_t num_threads</div><div class="ttdoc">Use 0 to indicate using the number of cores available on the system.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__api_8hpp_source.html#l00073">bf_job_api.hpp:73</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a291d4a5da74e434cc85514cca213ec72"><div class="ttname"><a href="namespacebf_1_1job.html#a291d4a5da74e434cc85514cca213ec72">bf::job::clampThreadCount</a></div><div class="ttdeci">static WorkerID clampThreadCount(WorkerID value, WorkerID min, WorkerID max)</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00342">bf_job_system.cpp:342</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a569f46928160d2ff793d9acbafd35277"><div class="ttname"><a href="namespacebf_1_1job.html#a569f46928160d2ff793d9acbafd35277">bf::job::numSystemThreads</a></div><div class="ttdeci">std::size_t numSystemThreads() noexcept</div><div class="ttdoc">Makes some system calls to grab the number threads / processors on the device. This function can be c...</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00347">bf_job_system.cpp:347</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a578698ca919202a8ec0473dd4f6c5b81"><div class="ttname"><a href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">bf::job::WorkerID</a></div><div class="ttdeci">std::uint16_t WorkerID</div><div class="ttdoc">The id type of each worker thread.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__api_8hpp_source.html#l00052">bf_job_api.hpp:52</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a6525dfa22a68b1011e5ef1e86be52b75"><div class="ttname"><a href="namespacebf_1_1job.html#a6525dfa22a68b1011e5ef1e86be52b75">bf::job::k_MainThreadID</a></div><div class="ttdeci">static constexpr WorkerID k_MainThreadID</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00096">bf_job_system.cpp:96</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a9f32cd8117952ffa2c8772faa3d9acd7"><div class="ttname"><a href="namespacebf_1_1job.html#a9f32cd8117952ffa2c8772faa3d9acd7">bf::job::k_MaxThreadsSupported</a></div><div class="ttdeci">static constexpr std::size_t k_MaxThreadsSupported</div><div class="ttdoc">The maximum number of threads that can be created, this is so that the library can be non dynamically...</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__config_8hpp_source.html#l00037">bf_job_config.hpp:37</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_thread_worker_html"><div class="ttname"><a href="structbf_1_1job_1_1_thread_worker.html">bf::job::ThreadWorker</a></div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00249">bf_job_system.cpp:250</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_thread_worker_html_a676f8a7f17dca420d83fb80f0e0314af"><div class="ttname"><a href="structbf_1_1job_1_1_thread_worker.html#a676f8a7f17dca420d83fb80f0e0314af">bf::job::ThreadWorker::rng_state</a></div><div class="ttdeci">pcg_state_setseq_64 rng_state</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00265">bf_job_system.cpp:265</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_thread_worker_html_ae780adaf6d7cdbfae184b5bea8ee7103"><div class="ttname"><a href="structbf_1_1job_1_1_thread_worker.html#ae780adaf6d7cdbfae184b5bea8ee7103">bf::job::ThreadWorker::start</a></div><div class="ttdeci">void start(bool is_main_thread)</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00765">bf_job_system.cpp:765</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00342">clampThreadCount()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00085">JobAssert</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00096">k_MainThreadID</a>, <a class="el" href="bf__job__config_8hpp_source.html#l00037">k_MaxThreadsSupported</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00347">numSystemThreads()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00265">bf::job::ThreadWorker::rng_state</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00765">bf::job::ThreadWorker::start()</a>.</p>

</div>
</div>
<a id="aa230de6f107416403da55c56ff39c600" name="aa230de6f107416403da55c56ff39c600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa230de6f107416403da55c56ff39c600">&#9670;&nbsp;</a></span>numWorkers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::uint32_t bf::job::numWorkers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the number of workers created by the system. This function can be called by any thread concurrently. </p>
<dl class="section return"><dt>Returns</dt><dd>std::size_t The number of workers created by the system. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00460">460</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>    {</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>      <span class="keywordflow">return</span> s_JobCtx.num_workers;</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00524">taskMake()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00600">taskSubmit()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00663">waitOnTask()</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00652">workerGC()</a>.</p>

</div>
</div>
<a id="ae9edb9cb3acc7877cbb87a66137467c9" name="ae9edb9cb3acc7877cbb87a66137467c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9edb9cb3acc7877cbb87a66137467c9">&#9670;&nbsp;</a></span>processorArchitectureName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * bf::job::processorArchitectureName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>An implementation defined name for the CPU architecture of the device. This function can be called by any thread concurrently. </p>
<dl class="section return"><dt>Returns</dt><dd>const char* Nul terminated name for the CPU architecture of the device. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00465">465</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    {</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>      <span class="keywordflow">return</span> s_JobCtx.sys_arch_str;</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2b7bca473a7040c5234ebba1fe6cb031" name="a2b7bca473a7040c5234ebba1fe6cb031"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b7bca473a7040c5234ebba1fe6cb031">&#9670;&nbsp;</a></span>currentWorker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a> bf::job::currentWorker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current id of the current thread. This function can be called by any thread concurrently. </p>
<dl class="section return"><dt>Returns</dt><dd>WorkerID The current id of the current thread. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00470">470</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>    {</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>      <span class="keywordflow">return</span> <a class="code hl_typedef" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>(s_ThreadLocalIndex);</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00765">bf::job::ThreadWorker::start()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00524">taskMake()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00600">taskSubmit()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00663">waitOnTask()</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00652">workerGC()</a>.</p>

</div>
</div>
<a id="a8518fcec0a8301682d27c92d93495e84" name="a8518fcec0a8301682d27c92d93495e84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8518fcec0a8301682d27c92d93495e84">&#9670;&nbsp;</a></span>tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bf::job::tick </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This should be called as frequently as you want the main thread's queue to be flushed. </p>
<p >This function may only be called by the main thread. </p>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00475">475</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    {</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>      <span class="comment">// Run any tasks from the special &#39;Main&#39; queue.</span></div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>      <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>      {</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structbf_1_1job_1_1_task_ptr.html">TaskPtr</a> task_ptr = s_JobCtx.main_queue.pop();</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span> </div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>        <span class="keywordflow">if</span> (task_ptr.<a class="code hl_function" href="structbf_1_1job_1_1_task_ptr.html#a22db6d339b844dc7c346078a00d80198">isNull</a>())</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>        {</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>          s_JobCtx.workers[<a class="code hl_variable" href="namespacebf_1_1job.html#a6525dfa22a68b1011e5ef1e86be52b75">k_MainThreadID</a>].garbageCollectAllocatedTasks();</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>        }</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span> </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>        Task* <span class="keyword">const</span> task = <a class="code hl_function" href="namespacebf_1_1job.html#a3d19ffe37dfe4b108e49920545957912">taskPtrToPointer</a>(task_ptr);</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>        task-&gt;run();</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>      }</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    }</div>
<div class="ttc" id="anamespacebf_1_1job_html_a3d19ffe37dfe4b108e49920545957912"><div class="ttname"><a href="namespacebf_1_1job.html#a3d19ffe37dfe4b108e49920545957912">bf::job::taskPtrToPointer</a></div><div class="ttdeci">static Task * taskPtrToPointer(TaskPtr ptr) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00950">bf_job_system.cpp:950</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_task_ptr_html"><div class="ttname"><a href="structbf_1_1job_1_1_task_ptr.html">bf::job::TaskPtr</a></div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00113">bf_job_system.cpp:114</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_task_ptr_html_a22db6d339b844dc7c346078a00d80198"><div class="ttname"><a href="structbf_1_1job_1_1_task_ptr.html#a22db6d339b844dc7c346078a00d80198">bf::job::TaskPtr::isNull</a></div><div class="ttdeci">bool isNull() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00132">bf_job_system.cpp:132</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00132">bf::job::TaskPtr::isNull()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00096">k_MainThreadID</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00173">bf::job::Task::run()</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00950">taskPtrToPointer()</a>.</p>

</div>
</div>
<a id="a0f005788a248d99a196608b5727b8bcd" name="a0f005788a248d99a196608b5727b8bcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f005788a248d99a196608b5727b8bcd">&#9670;&nbsp;</a></span>shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void bf::job::shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This will deallocate any memory used by the system and shutdown any threads created by 'bfJob::initialize'. </p>
<p >This function may only be called by the main thread. </p>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00493">493</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    {</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(s_NextThreadLocalIndex != 0u, <span class="stringliteral">&quot;Job System must be initialized before it can be shutdown.&quot;</span>);</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span> </div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>      <span class="keyword">const</span> std::uint32_t num_workers = s_JobCtx.num_workers;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span> </div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>      <span class="comment">// Makes sure the sleeping threads do not continue to sleep.</span></div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>      <span class="keywordflow">for</span> (std::uint32_t i = 1; i &lt; num_workers; ++i)</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>      {</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        s_JobCtx.workers[i].is_running = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>      }</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span> </div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>      <span class="comment">// Allow one last update loop to allow them to end.</span></div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>      s_JobCtx.wakeUpAllWorkers();</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span> </div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>      <span class="keywordflow">for</span> (std::uint32_t i = 0; i &lt; num_workers; ++i)</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>      {</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        ThreadWorker* <span class="keyword">const</span> worker = s_JobCtx.workers + i;</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span> </div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        <span class="keywordflow">if</span> (i != <a class="code hl_variable" href="namespacebf_1_1job.html#a6525dfa22a68b1011e5ef1e86be52b75">k_MainThreadID</a>)</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        {</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>          worker-&gt;stop();</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        }</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span> </div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        worker-&gt;~ThreadWorker();</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>      }</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span> </div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>      s_NextThreadLocalIndex = 0u;</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>      s_IsFullyInitialized   = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00085">JobAssert</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00096">k_MainThreadID</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00936">bf::job::ThreadWorker::stop()</a>.</p>

</div>
</div>
<a id="a34b82edd0c4dbead425152cf008ec532" name="a34b82edd0c4dbead425152cf008ec532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34b82edd0c4dbead425152cf008ec532">&#9670;&nbsp;</a></span>taskMake() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> * bf::job::taskMake </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacebf_1_1job.html#ae80841b2f4f6b256e5c7c3b2e4c2c541">TaskFn</a>&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>parent</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new <a class="el" href="structbf_1_1job_1_1_task.html" title="A single &#39;job&#39; to be run by this system.">Task</a> that should be later submitted by calling 'taskSubmit'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">function</td><td>The function you want run by the scheduler.</td></tr>
    <tr><td class="paramname">parent</td><td>An optional parent <a class="el" href="structbf_1_1job_1_1_task.html" title="A single &#39;job&#39; to be run by this system.">Task</a> used in conjunction with 'waitOnTask' to force dependencies.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Task* The newly created task. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00524">524</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>    {</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>      worker_id   = <a class="code hl_function" href="namespacebf_1_1job.html#a2b7bca473a7040c5234ebba1fe6cb031">currentWorker</a>();</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>      <span class="keyword">const</span> std::uint32_t num_workers = <a class="code hl_function" href="namespacebf_1_1job.html#aa230de6f107416403da55c56ff39c600">numWorkers</a>();</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span> </div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(worker_id &lt; num_workers, <span class="stringliteral">&quot;This thread was not created by the job system.&quot;</span>);</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span> </div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>      <a class="code hl_struct" href="structbf_1_1job_1_1_thread_worker.html">ThreadWorker</a>* <span class="keyword">const</span> worker = s_JobCtx.workers + worker_id;</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span> </div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>      <span class="keywordflow">if</span> (worker-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_thread_worker.html#ae4ae19f85c3ba0b38c1028e9d76184f0">num_allocated_tasks</a> == <a class="code hl_variable" href="namespacebf_1_1job.html#a632f29d428e3f8e61f50dc5b83724c98">k_MaxTasksPerWorker</a>)</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>      {</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>        worker-&gt;<a class="code hl_function" href="structbf_1_1job_1_1_thread_worker.html#ac4657b4fa017e299d1966125d8171dad">garbageCollectAllocatedTasks</a>();</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span> </div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>        s_JobCtx.wakeUpAllWorkers();</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span> </div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>        <span class="comment">// While we cannot allocate do some work.</span></div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>        <span class="keywordflow">while</span> (!(worker-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_thread_worker.html#ae4ae19f85c3ba0b38c1028e9d76184f0">num_allocated_tasks</a> &lt; <a class="code hl_variable" href="namespacebf_1_1job.html#a632f29d428e3f8e61f50dc5b83724c98">k_MaxTasksPerWorker</a>))</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>        {</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>          worker-&gt;<a class="code hl_function" href="structbf_1_1job_1_1_thread_worker.html#a78345f493b2b89d08ddd2ea9096356ca">run</a>(worker_id);</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>          worker-&gt;<a class="code hl_function" href="structbf_1_1job_1_1_thread_worker.html#ac4657b4fa017e299d1966125d8171dad">garbageCollectAllocatedTasks</a>();</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>        }</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>      }</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span> </div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>      Task* <span class="keyword">const</span>      task     = worker-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_thread_worker.html#a9f8c9e6968be8af401d89019c153a214">task_memory</a>.allocate(worker_id, <span class="keyword">function</span>, parent ? parent-&gt;<a class="code hl_function" href="structbf_1_1job_1_1_task.html#a4d80f6f5f9e2bc3066bbbc926914b592">toTaskPtr</a>() : TaskPtr{NullTaskHandle, NullTaskHandle});</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="namespacebf_1_1job.html#a8950eddf68eeb5563079a6239f70652e">TaskHandle</a> task_hdl = <a class="code hl_typedef" href="namespacebf_1_1job.html#a8950eddf68eeb5563079a6239f70652e">TaskHandle</a>(worker-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_thread_worker.html#a9f8c9e6968be8af401d89019c153a214">task_memory</a>.indexOf(task));</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span> </div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>      <span class="keywordflow">if</span> (parent)</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>      {</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>        parent-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#a64cb366e18e85029e534f08de8f92b43">num_unfinished_tasks</a>.fetch_add(1u);</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>      }</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span> </div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(worker-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_thread_worker.html#ae4ae19f85c3ba0b38c1028e9d76184f0">num_allocated_tasks</a> &lt; <a class="code hl_variable" href="namespacebf_1_1job.html#a632f29d428e3f8e61f50dc5b83724c98">k_MaxTasksPerWorker</a>, <span class="stringliteral">&quot;Too many tasks allocated.&quot;</span>);</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span> </div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>      worker-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_thread_worker.html#a4e2279557d40bb9f99798edaa4614245">allocated_tasks</a>[worker-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_thread_worker.html#ae4ae19f85c3ba0b38c1028e9d76184f0">num_allocated_tasks</a>++] = task_hdl;</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>      worker-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_thread_worker.html#adbee785371be071ff383a49b81796711">finished_tasks</a>[task_hdl]                       = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span> </div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>      <span class="keywordflow">return</span> task;</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    }</div>
<div class="ttc" id="anamespacebf_1_1job_html_a2b7bca473a7040c5234ebba1fe6cb031"><div class="ttname"><a href="namespacebf_1_1job.html#a2b7bca473a7040c5234ebba1fe6cb031">bf::job::currentWorker</a></div><div class="ttdeci">WorkerID currentWorker() noexcept</div><div class="ttdoc">The current id of the current thread. This function can be called by any thread concurrently.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00470">bf_job_system.cpp:470</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a632f29d428e3f8e61f50dc5b83724c98"><div class="ttname"><a href="namespacebf_1_1job.html#a632f29d428e3f8e61f50dc5b83724c98">bf::job::k_MaxTasksPerWorker</a></div><div class="ttdeci">static constexpr std::size_t k_MaxTasksPerWorker</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00095">bf_job_system.cpp:95</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a8950eddf68eeb5563079a6239f70652e"><div class="ttname"><a href="namespacebf_1_1job.html#a8950eddf68eeb5563079a6239f70652e">bf::job::TaskHandle</a></div><div class="ttdeci">std::uint16_t TaskHandle</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00105">bf_job_system.cpp:105</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_aa230de6f107416403da55c56ff39c600"><div class="ttname"><a href="namespacebf_1_1job.html#aa230de6f107416403da55c56ff39c600">bf::job::numWorkers</a></div><div class="ttdeci">std::uint32_t numWorkers() noexcept</div><div class="ttdoc">Returns the number of workers created by the system. This function can be called by any thread concur...</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00460">bf_job_system.cpp:460</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_task_html_a4d80f6f5f9e2bc3066bbbc926914b592"><div class="ttname"><a href="structbf_1_1job_1_1_task.html#a4d80f6f5f9e2bc3066bbbc926914b592">bf::job::Task::toTaskPtr</a></div><div class="ttdeci">TaskPtr toTaskPtr() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00721">bf_job_system.cpp:721</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_task_html_a64cb366e18e85029e534f08de8f92b43"><div class="ttname"><a href="structbf_1_1job_1_1_task.html#a64cb366e18e85029e534f08de8f92b43">bf::job::Task::num_unfinished_tasks</a></div><div class="ttdeci">AtomicInt32 num_unfinished_tasks</div><div class="ttdoc">The number of children tasks.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00161">bf_job_system.cpp:161</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_thread_worker_html_a4e2279557d40bb9f99798edaa4614245"><div class="ttname"><a href="structbf_1_1job_1_1_thread_worker.html#a4e2279557d40bb9f99798edaa4614245">bf::job::ThreadWorker::allocated_tasks</a></div><div class="ttdeci">TaskHandleArray allocated_tasks</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00260">bf_job_system.cpp:260</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_thread_worker_html_a78345f493b2b89d08ddd2ea9096356ca"><div class="ttname"><a href="structbf_1_1job_1_1_thread_worker.html#a78345f493b2b89d08ddd2ea9096356ca">bf::job::ThreadWorker::run</a></div><div class="ttdeci">bool run(const WorkerID worker_id)</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00877">bf_job_system.cpp:877</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_thread_worker_html_a9f8c9e6968be8af401d89019c153a214"><div class="ttname"><a href="structbf_1_1job_1_1_thread_worker.html#a9f8c9e6968be8af401d89019c153a214">bf::job::ThreadWorker::task_memory</a></div><div class="ttdeci">TaskPool&lt; k_MaxTasksPerWorker &gt; task_memory</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00259">bf_job_system.cpp:259</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_thread_worker_html_ac4657b4fa017e299d1966125d8171dad"><div class="ttname"><a href="structbf_1_1job_1_1_thread_worker.html#ac4657b4fa017e299d1966125d8171dad">bf::job::ThreadWorker::garbageCollectAllocatedTasks</a></div><div class="ttdeci">void garbageCollectAllocatedTasks()</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00826">bf_job_system.cpp:826</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_thread_worker_html_adbee785371be071ff383a49b81796711"><div class="ttname"><a href="structbf_1_1job_1_1_thread_worker.html#adbee785371be071ff383a49b81796711">bf::job::ThreadWorker::finished_tasks</a></div><div class="ttdeci">TaskHandleToBoolMap finished_tasks</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00261">bf_job_system.cpp:261</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_thread_worker_html_ae4ae19f85c3ba0b38c1028e9d76184f0"><div class="ttname"><a href="structbf_1_1job_1_1_thread_worker.html#ae4ae19f85c3ba0b38c1028e9d76184f0">bf::job::ThreadWorker::num_allocated_tasks</a></div><div class="ttdeci">TaskHandleType num_allocated_tasks</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00263">bf_job_system.cpp:263</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00260">bf::job::ThreadWorker::allocated_tasks</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00470">currentWorker()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00261">bf::job::ThreadWorker::finished_tasks</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00826">bf::job::ThreadWorker::garbageCollectAllocatedTasks()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00085">JobAssert</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00095">k_MaxTasksPerWorker</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00263">bf::job::ThreadWorker::num_allocated_tasks</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00460">numWorkers()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00165">bf::job::Task::parent</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00877">bf::job::ThreadWorker::run()</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00259">bf::job::ThreadWorker::task_memory</a>.</p>

<p class="reference">Referenced by <a class="el" href="bf__job__ext_8hpp_source.html#l00115">parallel_for()</a>, <a class="el" href="bf__job__ext_8hpp_source.html#l00239">parallel_invoke()</a>, and <a class="el" href="bf__job__api_8hpp_source.html#l00382">taskMake()</a>.</p>

</div>
</div>
<a id="a921c7746e85094422d49fe193a523612" name="a921c7746e85094422d49fe193a523612"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a921c7746e85094422d49fe193a523612">&#9670;&nbsp;</a></span>taskGetData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacebf_1_1job.html#structbf_1_1job_1_1_task_data">TaskData</a> bf::job::taskGetData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns you the user-data buffer you way write to get data into your TaskFn. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task whose user-data you want to grab.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="namespacebf_1_1job.html#structbf_1_1job_1_1_task_data" title="A buffer for user-data you can write to, maybe large enough to store task data inline.">TaskData</a> The user-data buffer you may read and write. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00563">563</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    {</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>      <span class="keyword">const</span> std::size_t user_data_start = <span class="keyword">sizeof</span>(task-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#a1d5e9e7923d45b95e0e226226065f80d">padding</a>) - task-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#aaab64f62740308ea1889ad27dd41d5c2">user_storage_size</a>;</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>      <span class="keywordflow">return</span> {task-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#a1d5e9e7923d45b95e0e226226065f80d">padding</a>.data() + user_data_start, task-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#aaab64f62740308ea1889ad27dd41d5c2">user_storage_size</a>};</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    }</div>
<div class="ttc" id="astructbf_1_1job_1_1_task_html_a1d5e9e7923d45b95e0e226226065f80d"><div class="ttname"><a href="structbf_1_1job_1_1_task.html#a1d5e9e7923d45b95e0e226226065f80d">bf::job::Task::padding</a></div><div class="ttdeci">Padding padding</div><div class="ttdoc">User data storage.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00169">bf_job_system.cpp:169</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_task_html_aaab64f62740308ea1889ad27dd41d5c2"><div class="ttname"><a href="structbf_1_1job_1_1_task.html#aaab64f62740308ea1889ad27dd41d5c2">bf::job::Task::user_storage_size</a></div><div class="ttdeci">std::uint8_t user_storage_size</div><div class="ttdoc">Number of bytes available to the user in padding.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00163">bf_job_system.cpp:163</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="bf__job__api_8hpp_source.html#l00362">taskDataAs()</a>, and <a class="el" href="bf__job__api_8hpp_source.html#l00369">taskEmplaceData()</a>.</p>

</div>
</div>
<a id="a59f5325afedfb4a33100a2d87ad45ed9" name="a59f5325afedfb4a33100a2d87ad45ed9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59f5325afedfb4a33100a2d87ad45ed9">&#9670;&nbsp;</a></span>taskAddContinuation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void bf::job::taskAddContinuation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>continuation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A 'continuation' is a task that will be added to a queue after the 'self' <a class="el" href="structbf_1_1job_1_1_task.html" title="A single &#39;job&#39; to be run by this system.">Task</a> has finished running. </p>
<p >Continuations will be added to the same queue as the queue from the task that submits it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The task to add the 'continuation' to.</td></tr>
    <tr><td class="paramname">continuation</td><td>The <a class="el" href="structbf_1_1job_1_1_task.html" title="A single &#39;job&#39; to be run by this system.">Task</a> to run after 'self' has finished. This task must not have already been submitted to a queue. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00569">569</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    {</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(self-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#acd1b6b1602d5c7852aab09e48d1691ea">q_type</a> == <a class="code hl_variable" href="namespacebf_1_1job.html#ac4743caff1b0745ed1704bae6e7d51d0">k_InvalidQueueType</a>, <span class="stringliteral">&quot;The task should not have already been submitted to a queue.&quot;</span>);</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(continuation-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#acd1b6b1602d5c7852aab09e48d1691ea">q_type</a> == <a class="code hl_variable" href="namespacebf_1_1job.html#ac4743caff1b0745ed1704bae6e7d51d0">k_InvalidQueueType</a>, <span class="stringliteral">&quot;A continuation must not have already been submitted to a queue.&quot;</span>);</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(continuation-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#adf6c2ae68363b6d90a2f5d3682cb3584">next_continuation</a>.<a class="code hl_function" href="structbf_1_1job_1_1_task_ptr.html#a22db6d339b844dc7c346078a00d80198">isNull</a>(), <span class="stringliteral">&quot;A continuation must not have already been added to another task.&quot;</span>);</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span> </div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>      <span class="keyword">const</span> <a class="code hl_struct" href="structbf_1_1job_1_1_task_ptr.html">TaskPtr</a> new_head = continuation-&gt;<a class="code hl_function" href="structbf_1_1job_1_1_task.html#a4d80f6f5f9e2bc3066bbbc926914b592">toTaskPtr</a>();</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>      <a class="code hl_struct" href="structbf_1_1job_1_1_task_ptr.html">TaskPtr</a>       expected_head;</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>      <span class="keywordflow">do</span></div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>      {</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>        expected_head                   = <span class="keyword">self</span>-&gt;first_continuation.load();</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>        continuation-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#adf6c2ae68363b6d90a2f5d3682cb3584">next_continuation</a> = expected_head;</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span> </div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>      } <span class="keywordflow">while</span> (!std::atomic_compare_exchange_weak(&amp;self-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#a66ae811ff80b58475845678a43d3f29d">first_continuation</a>, &amp;expected_head, new_head));</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    }</div>
<div class="ttc" id="anamespacebf_1_1job_html_ac4743caff1b0745ed1704bae6e7d51d0"><div class="ttname"><a href="namespacebf_1_1job.html#ac4743caff1b0745ed1704bae6e7d51d0">bf::job::k_InvalidQueueType</a></div><div class="ttdeci">static constexpr QueueType k_InvalidQueueType</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00097">bf_job_system.cpp:97</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_task_html_a66ae811ff80b58475845678a43d3f29d"><div class="ttname"><a href="structbf_1_1job_1_1_task.html#a66ae811ff80b58475845678a43d3f29d">bf::job::Task::first_continuation</a></div><div class="ttdeci">AtomicTaskPtr first_continuation</div><div class="ttdoc">Head of linked list of tasks to be added on completion.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00166">bf_job_system.cpp:166</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_task_html_acd1b6b1602d5c7852aab09e48d1691ea"><div class="ttname"><a href="structbf_1_1job_1_1_task.html#acd1b6b1602d5c7852aab09e48d1691ea">bf::job::Task::q_type</a></div><div class="ttdeci">QueueType q_type</div><div class="ttdoc">The queue type this task has been submitted to, initalized to k_InvalidQueueType.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00164">bf_job_system.cpp:164</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_task_html_adf6c2ae68363b6d90a2f5d3682cb3584"><div class="ttname"><a href="structbf_1_1job_1_1_task.html#adf6c2ae68363b6d90a2f5d3682cb3584">bf::job::Task::next_continuation</a></div><div class="ttdeci">TaskPtr next_continuation</div><div class="ttdoc">Next element in the linked list of continuations.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00167">bf_job_system.cpp:167</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00085">JobAssert</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00097">k_InvalidQueueType</a>.</p>

</div>
</div>
<a id="a9d8571034c2aff8664cbffc8de3e9d22" name="a9d8571034c2aff8664cbffc8de3e9d22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d8571034c2aff8664cbffc8de3e9d22">&#9670;&nbsp;</a></span>taskSubmit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> * bf::job::taskSubmit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a>&#160;</td>
          <td class="paramname"><em>queue</em> = <code><a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a1e23852820b9154316c7c06e2b7ba051">QueueType::NORMAL</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Submits the task to the specified queue. </p>
<p >The <a class="el" href="structbf_1_1job_1_1_task.html" title="A single &#39;job&#39; to be run by this system.">Task</a> is not required to have been created on the same thread that submits.</p>
<p >You may now wait on this task using 'waitOnTask'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The task to submit.</td></tr>
    <tr><td class="paramname">queue</td><td>The queue you want the task to run on.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Task* Returns the task passed in. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00600">600</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    {</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a> worker_id = <a class="code hl_function" href="namespacebf_1_1job.html#a2b7bca473a7040c5234ebba1fe6cb031">currentWorker</a>();</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span> </div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(self-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#acd1b6b1602d5c7852aab09e48d1691ea">q_type</a> == <a class="code hl_variable" href="namespacebf_1_1job.html#ac4743caff1b0745ed1704bae6e7d51d0">k_InvalidQueueType</a>, <span class="stringliteral">&quot;A task cannot be submitted to a queue multiple times.&quot;</span>);</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(worker_id &lt; <a class="code hl_function" href="namespacebf_1_1job.html#aa230de6f107416403da55c56ff39c600">numWorkers</a>(), <span class="stringliteral">&quot;This thread was not created by the job system.&quot;</span>);</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span> </div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>      <a class="code hl_struct" href="structbf_1_1job_1_1_thread_worker.html">ThreadWorker</a>* <span class="keyword">const</span> worker = s_JobCtx.workers + worker_id;</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span> </div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>      <span class="keyword">self</span>-&gt;q_type = queue;</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span> </div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>      <span class="keywordflow">switch</span> (queue)</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>      {</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>        <span class="keywordflow">case</span> QueueType::NORMAL:</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>        {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>          <a class="code hl_function" href="namespacebf_1_1job.html#a26d9d7e71f60828db101a6e8ba474741">taskSubmitQPushHelper</a>(<span class="keyword">self</span>, worker_id, worker-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_thread_worker.html#a77f37e07ac7e1ee969ce02db058adf58">hi_queue</a>);</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>        }</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>        <span class="keywordflow">case</span> QueueType::MAIN:</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>        {</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>          <a class="code hl_function" href="namespacebf_1_1job.html#a26d9d7e71f60828db101a6e8ba474741">taskSubmitQPushHelper</a>(<span class="keyword">self</span>, worker_id, s_JobCtx.main_queue);</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>        }</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>        <span class="keywordflow">case</span> QueueType::BACKGROUND:</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>        {</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>          <a class="code hl_function" href="namespacebf_1_1job.html#a26d9d7e71f60828db101a6e8ba474741">taskSubmitQPushHelper</a>(<span class="keyword">self</span>, worker_id, worker-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_thread_worker.html#af40ef8f13381beb0190321d2cf03f058">bg_queue</a>);</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>        }</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>      }</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span> </div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>      s_JobCtx.num_available_jobs.fetch_add(1);</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>      s_JobCtx.wakeUpOneWorker();</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>      <span class="keywordflow">return</span> <span class="keyword">self</span>;</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    }</div>
<div class="ttc" id="anamespacebf_1_1job_html_a26d9d7e71f60828db101a6e8ba474741"><div class="ttname"><a href="namespacebf_1_1job.html#a26d9d7e71f60828db101a6e8ba474741">bf::job::taskSubmitQPushHelper</a></div><div class="ttdeci">static void taskSubmitQPushHelper(Task *const self, const WorkerID worker_id, QueueType &amp;queue)</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00586">bf_job_system.cpp:586</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_thread_worker_html_a77f37e07ac7e1ee969ce02db058adf58"><div class="ttname"><a href="structbf_1_1job_1_1_thread_worker.html#a77f37e07ac7e1ee969ce02db058adf58">bf::job::ThreadWorker::hi_queue</a></div><div class="ttdeci">NormalQueue hi_queue</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00257">bf_job_system.cpp:257</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_thread_worker_html_af40ef8f13381beb0190321d2cf03f058"><div class="ttname"><a href="structbf_1_1job_1_1_thread_worker.html#af40ef8f13381beb0190321d2cf03f058">bf::job::ThreadWorker::bg_queue</a></div><div class="ttdeci">BackgroundQueue bg_queue</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00258">bf_job_system.cpp:258</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a87ed58ce5596142e11cb65deb049bb4b">BACKGROUND</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00258">bf::job::ThreadWorker::bg_queue</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00470">currentWorker()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00257">bf::job::ThreadWorker::hi_queue</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00085">JobAssert</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00097">k_InvalidQueueType</a>, <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a186495f7da296bf880df3a22a492b378">MAIN</a>, <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a1e23852820b9154316c7c06e2b7ba051">NORMAL</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00460">numWorkers()</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00586">taskSubmitQPushHelper()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00728">bf::job::Task::onFinish()</a>, <a class="el" href="bf__job__ext_8hpp_source.html#l00115">parallel_for()</a>, and <a class="el" href="bf__job__ext_8hpp_source.html#l00239">parallel_invoke()</a>.</p>

</div>
</div>
<a id="abb85604e4d907f4190c55d798c628982" name="abb85604e4d907f4190c55d798c628982"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb85604e4d907f4190c55d798c628982">&#9670;&nbsp;</a></span>taskDataAs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">T &amp; bf::job::taskDataAs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Grabs the user-data pointer as the T you specified. No safety is guaranteed, this is just a dumb cast. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>The type you want to receive the user-data buffer as.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task whose data you are retrieving.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>T&amp; The user-data buffer casted as a T. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__api_8hpp_source.html#l00362">362</a> of file <a class="el" href="bf__job__api_8hpp_source.html">bf_job_api.hpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    {</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>      <a class="code hl_function" href="namespacebf_1_1job_1_1detail.html#aabdd24a980f9df66e4c028271cc61944">detail::checkTaskDataSize</a>(task, <span class="keyword">sizeof</span>(T));</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>      <span class="keywordflow">return</span> *<span class="keyword">static_cast&lt;</span>T*<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacebf_1_1job.html#a921c7746e85094422d49fe193a523612">taskGetData</a>(task).<a class="code hl_variable" href="namespacebf_1_1job.html#a25348a17d7317b42b3fc6a9f55ff70c7">ptr</a>);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    }</div>
<div class="ttc" id="anamespacebf_1_1job_1_1detail_html_aabdd24a980f9df66e4c028271cc61944"><div class="ttname"><a href="namespacebf_1_1job_1_1detail.html#aabdd24a980f9df66e4c028271cc61944">bf::job::detail::checkTaskDataSize</a></div><div class="ttdeci">void checkTaskDataSize(const Task *task, std::size_t data_size) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00320">bf_job_system.cpp:320</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a25348a17d7317b42b3fc6a9f55ff70c7"><div class="ttname"><a href="namespacebf_1_1job.html#a25348a17d7317b42b3fc6a9f55ff70c7">bf::job::TaskData::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdoc">The start of the buffer you may write to.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__api_8hpp_source.html#l00165">bf_job_api.hpp:165</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a921c7746e85094422d49fe193a523612"><div class="ttname"><a href="namespacebf_1_1job.html#a921c7746e85094422d49fe193a523612">bf::job::taskGetData</a></div><div class="ttdeci">TaskData taskGetData(Task *const task) noexcept</div><div class="ttdoc">Returns you the user-data buffer you way write to get data into your TaskFn.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00563">bf_job_system.cpp:563</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00320">bf::job::detail::checkTaskDataSize()</a>, <a class="el" href="bf__job__api_8hpp_source.html#l00165">bf::job::TaskData::ptr</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00563">taskGetData()</a>.</p>

</div>
</div>
<a id="aef7643eed8577eaad7b9dad4e887fdca" name="aef7643eed8577eaad7b9dad4e887fdca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef7643eed8577eaad7b9dad4e887fdca">&#9670;&nbsp;</a></span>taskEmplaceData()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , typename... Args&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void bf::job::taskEmplaceData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls the constructor of T on the user-data buffer. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>The type of T you want constructed in-place into the user-data buffer.</td></tr>
    <tr><td class="paramname">Args</td><td>The Argument types passed into the T constructor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task whose user-data buffer is affected.</td></tr>
    <tr><td class="paramname">args</td><td>The arguments passed into the constructor of the user-data buffer casted as a T. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bf__job__api_8hpp_source.html#l00369">369</a> of file <a class="el" href="bf__job__api_8hpp_source.html">bf_job_api.hpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    {</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>      <a class="code hl_function" href="namespacebf_1_1job_1_1detail.html#aabdd24a980f9df66e4c028271cc61944">detail::checkTaskDataSize</a>(task, <span class="keyword">sizeof</span>(T));</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>      <span class="keyword">new</span> (<a class="code hl_function" href="namespacebf_1_1job.html#a921c7746e85094422d49fe193a523612">taskGetData</a>(task).<a class="code hl_variable" href="namespacebf_1_1job.html#a25348a17d7317b42b3fc6a9f55ff70c7">ptr</a>) T(std::forward&lt;Args&gt;(args)...);</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00320">bf::job::detail::checkTaskDataSize()</a>, <a class="el" href="bf__job__api_8hpp_source.html#l00165">bf::job::TaskData::ptr</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00563">taskGetData()</a>.</p>

</div>
</div>
<a id="af57f75705be9ca98403dd7181c6744b6" name="af57f75705be9ca98403dd7181c6744b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af57f75705be9ca98403dd7181c6744b6">&#9670;&nbsp;</a></span>taskSetData()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void bf::job::taskSetData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const T &amp;&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies 'data' into the user-data buffer by calling the T copy constructor. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>The data type that will be emplaced into the user-data buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task whose user-data buffer is affected.</td></tr>
    <tr><td class="paramname">data</td><td>The data copied into the user-data buffer. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bf__job__api_8hpp_source.html#l00376">376</a> of file <a class="el" href="bf__job__api_8hpp_source.html">bf_job_api.hpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    {</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>      taskEmplaceData&lt;T&gt;(task, data);</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="af43aa7fb7429e273b2776523f84499be" name="af43aa7fb7429e273b2776523f84499be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af43aa7fb7429e273b2776523f84499be">&#9670;&nbsp;</a></span>taskMake() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Closure &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> * bf::job::taskMake </td>
          <td>(</td>
          <td class="paramtype">Closure &amp;&amp;&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>parent</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new task making a copy of the closure. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Closure</td><td>The type of the callable.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">function</td><td>The non pointer callable you want to store.</td></tr>
    <tr><td class="paramname">parent</td><td>An optional parent <a class="el" href="structbf_1_1job_1_1_task.html" title="A single &#39;job&#39; to be run by this system.">Task</a> used in conjunction with 'waitOnTask' to force dependencies.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Task* The newly created task. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__api_8hpp_source.html#l00382">382</a> of file <a class="el" href="bf__job__api_8hpp_source.html">bf_job_api.hpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    {</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>      <a class="code hl_struct" href="structbf_1_1job_1_1_task.html">Task</a>* <span class="keyword">const</span> task = <a class="code hl_function" href="namespacebf_1_1job.html#af43aa7fb7429e273b2776523f84499be">taskMake</a>(</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>       +[](<a class="code hl_struct" href="structbf_1_1job_1_1_task.html">Task</a>* task) {</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>         Closure&amp; <span class="keyword">function</span> = *<span class="keyword">static_cast&lt;</span>Closure*<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacebf_1_1job_1_1detail.html#a7da8dd4fc50cb123f027154e3980c035">detail::taskPaddingStart</a>(task));</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>         <span class="keyword">function</span>(task);</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>         <span class="keyword">function</span>.~Closure();</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>       },</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>       parent);</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>      taskEmplaceData&lt;Closure&gt;(task, std::forward&lt;Closure&gt;(<span class="keyword">function</span>));</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>      <a class="code hl_function" href="namespacebf_1_1job_1_1detail.html#af8a0d6ce60f727781cf7f12d70956922">detail::taskUsePadding</a>(task, <span class="keyword">sizeof</span>(Closure));</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span> </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>      <span class="keywordflow">return</span> task;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    }</div>
<div class="ttc" id="anamespacebf_1_1job_1_1detail_html_a7da8dd4fc50cb123f027154e3980c035"><div class="ttname"><a href="namespacebf_1_1job_1_1detail.html#a7da8dd4fc50cb123f027154e3980c035">bf::job::detail::taskPaddingStart</a></div><div class="ttdeci">void * taskPaddingStart(Task *const task) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00331">bf_job_system.cpp:331</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_1_1detail_html_af8a0d6ce60f727781cf7f12d70956922"><div class="ttname"><a href="namespacebf_1_1job_1_1detail.html#af8a0d6ce60f727781cf7f12d70956922">bf::job::detail::taskUsePadding</a></div><div class="ttdeci">void taskUsePadding(Task *task, std::size_t num_bytes) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00336">bf_job_system.cpp:336</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_af43aa7fb7429e273b2776523f84499be"><div class="ttname"><a href="namespacebf_1_1job.html#af43aa7fb7429e273b2776523f84499be">bf::job::taskMake</a></div><div class="ttdeci">Task * taskMake(Closure &amp;&amp;function, Task *const parent=nullptr)</div><div class="ttdoc">Creates a new task making a copy of the closure.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__api_8hpp_source.html#l00382">bf_job_api.hpp:382</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_task_html"><div class="ttname"><a href="structbf_1_1job_1_1_task.html">bf::job::Task</a></div><div class="ttdoc">A single 'job' to be run by this system.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00143">bf_job_system.cpp:144</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00524">taskMake()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00331">bf::job::detail::taskPaddingStart()</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00336">bf::job::detail::taskUsePadding()</a>.</p>

</div>
</div>
<a id="a16013b6b11e1be5fc9f92ddc8ebe682b" name="a16013b6b11e1be5fc9f92ddc8ebe682b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16013b6b11e1be5fc9f92ddc8ebe682b">&#9670;&nbsp;</a></span>taskIncRef()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bf::job::taskIncRef </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increments the task's ref count preventing it from being garbage collected. </p>
<p >This function should be called before <code>taskSubmit</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task's who's ref count should be incremented. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00635">635</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    {</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>      task-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#a9e85804abff3ad94b57b8ea7aac6d900">ref_count</a>.fetch_add(1, std::memory_order_relaxed);</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>    }</div>
<div class="ttc" id="astructbf_1_1job_1_1_task_html_a9e85804abff3ad94b57b8ea7aac6d900"><div class="ttname"><a href="structbf_1_1job_1_1_task.html#a9e85804abff3ad94b57b8ea7aac6d900">bf::job::Task::ref_count</a></div><div class="ttdeci">AtomicInt16 ref_count</div><div class="ttdoc">Keeps the task from being garbage collected.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00162">bf_job_system.cpp:162</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00162">bf::job::Task::ref_count</a>.</p>

</div>
</div>
<a id="a319ff8e231fce83f3990cfc703675f95" name="a319ff8e231fce83f3990cfc703675f95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a319ff8e231fce83f3990cfc703675f95">&#9670;&nbsp;</a></span>taskDecRef()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bf::job::taskDecRef </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrements the task's ref count allow it to be garbage collected. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task's who's ref count should be decremented. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00640">640</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>    {</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>      <span class="keyword">const</span> <span class="keyword">auto</span> old_ref_count = task-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#a9e85804abff3ad94b57b8ea7aac6d900">ref_count</a>.fetch_sub(1, std::memory_order_relaxed);</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span> </div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(old_ref_count &gt;= 0, <span class="stringliteral">&quot;taskDecRef: Called too many times.&quot;</span>);</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00085">JobAssert</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00162">bf::job::Task::ref_count</a>.</p>

</div>
</div>
<a id="ac5175f1552d04cf66c93fbf126769ca6" name="ac5175f1552d04cf66c93fbf126769ca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5175f1552d04cf66c93fbf126769ca6">&#9670;&nbsp;</a></span>taskIsDone()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool bf::job::taskIsDone </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the done status of the task. </p>
<p >This is only safe to call after submiting the task if you have an active reference to the task through a call to taskIncRef.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task to check whether or not it's done.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true - The task is done running. false - The task is still running.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="namespacebf_1_1job.html#a16013b6b11e1be5fc9f92ddc8ebe682b" title="Increments the task&#39;s ref count preventing it from being garbage collected.">taskIncRef</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00647">647</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    {</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>      <span class="keywordflow">return</span> task-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#a64cb366e18e85029e534f08de8f92b43">num_unfinished_tasks</a>.load() == -1;</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00663">waitOnTask()</a>.</p>

</div>
</div>
<a id="a384cbecfdf7aaa8629c6afb2ef0d90ae" name="a384cbecfdf7aaa8629c6afb2ef0d90ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a384cbecfdf7aaa8629c6afb2ef0d90ae">&#9670;&nbsp;</a></span>workerGC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bf::job::workerGC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Garbage collects tasks allocated on the current worker. </p>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00652">652</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>    {</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a> worker_id = <a class="code hl_function" href="namespacebf_1_1job.html#a2b7bca473a7040c5234ebba1fe6cb031">currentWorker</a>();</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span> </div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(worker_id &lt; <a class="code hl_function" href="namespacebf_1_1job.html#aa230de6f107416403da55c56ff39c600">numWorkers</a>(), <span class="stringliteral">&quot;This thread was not created by the job system.&quot;</span>);</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span> </div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>      <a class="code hl_struct" href="structbf_1_1job_1_1_thread_worker.html">ThreadWorker</a>&amp; worker = s_JobCtx.workers[worker_id];</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span> </div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>      worker.<a class="code hl_function" href="structbf_1_1job_1_1_thread_worker.html#ac4657b4fa017e299d1966125d8171dad">garbageCollectAllocatedTasks</a>();</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00470">currentWorker()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00826">bf::job::ThreadWorker::garbageCollectAllocatedTasks()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00085">JobAssert</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00460">numWorkers()</a>.</p>

</div>
</div>
<a id="a6af1eef961e26e6cbdf84dd01d86a619" name="a6af1eef961e26e6cbdf84dd01d86a619"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6af1eef961e26e6cbdf84dd01d86a619">&#9670;&nbsp;</a></span>waitOnTask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void bf::job::waitOnTask </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Waits until the specified <code>task</code> is done executing. This function will block but do work while being blocked so there is no wasted time. </p>
<p >You may only call this function with a task created on the current 'Worker'.</p>
<p >It is a logic error to call this function on a task that has not been taskSubmit'd.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task to wait to finish executing. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00663">663</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    {</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>      worker_id   = <a class="code hl_function" href="namespacebf_1_1job.html#a2b7bca473a7040c5234ebba1fe6cb031">currentWorker</a>();</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>      <span class="keyword">const</span> std::uint32_t num_workers = <a class="code hl_function" href="namespacebf_1_1job.html#aa230de6f107416403da55c56ff39c600">numWorkers</a>();</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span> </div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(task-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#acd1b6b1602d5c7852aab09e48d1691ea">q_type</a> != <a class="code hl_variable" href="namespacebf_1_1job.html#ac4743caff1b0745ed1704bae6e7d51d0">k_InvalidQueueType</a>, <span class="stringliteral">&quot;The Task must be submitted to a queue before you wait on it.&quot;</span>);</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(worker_id &lt; num_workers, <span class="stringliteral">&quot;This thread was not created by the job system.&quot;</span>);</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(task-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#a4b5419369be19ab2535809796bf25b83">owning_worker</a> == worker_id, <span class="stringliteral">&quot;You may only call this function with a task created on the current &#39;Worker&#39;.&quot;</span>);</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span> </div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>      s_JobCtx.wakeUpAllWorkers();</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span> </div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>      <a class="code hl_struct" href="structbf_1_1job_1_1_thread_worker.html">ThreadWorker</a>&amp; worker = s_JobCtx.workers[worker_id];</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span> </div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>      <span class="keywordflow">while</span> (!<a class="code hl_function" href="namespacebf_1_1job.html#ac5175f1552d04cf66c93fbf126769ca6">taskIsDone</a>(task))</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>      {</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        worker.<a class="code hl_function" href="structbf_1_1job_1_1_thread_worker.html#a78345f493b2b89d08ddd2ea9096356ca">run</a>(worker_id);</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>      }</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    }</div>
<div class="ttc" id="anamespacebf_1_1job_html_ac5175f1552d04cf66c93fbf126769ca6"><div class="ttname"><a href="namespacebf_1_1job.html#ac5175f1552d04cf66c93fbf126769ca6">bf::job::taskIsDone</a></div><div class="ttdeci">bool taskIsDone(const Task *const task) noexcept</div><div class="ttdoc">Returns the done status of the task.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00647">bf_job_system.cpp:647</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_task_html_a4b5419369be19ab2535809796bf25b83"><div class="ttname"><a href="structbf_1_1job_1_1_task.html#a4b5419369be19ab2535809796bf25b83">bf::job::Task::owning_worker</a></div><div class="ttdeci">WorkerID owning_worker</div><div class="ttdoc">The worker this task has been created on, needed for Task::toTaskPtr and various assertions.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00168">bf_job_system.cpp:168</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00470">currentWorker()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00085">JobAssert</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00097">k_InvalidQueueType</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00460">numWorkers()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00877">bf::job::ThreadWorker::run()</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00647">taskIsDone()</a>.</p>

</div>
</div>
<a id="a4ca43dbd44d354a1e2aa1e9b16efe602" name="a4ca43dbd44d354a1e2aa1e9b16efe602"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ca43dbd44d354a1e2aa1e9b16efe602">&#9670;&nbsp;</a></span>parallel_for() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F , typename S &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> * bf::job::parallel_for </td>
          <td>(</td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">S &amp;&amp;&#160;</td>
          <td class="paramname"><em>splitter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F &amp;&amp;&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parallel for algorithm, splits the work up recursively spliting based on the <code>splitter</code> passed in. </p>
<p >Assumes all callables passed in are thread safe.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">F</td><td>Type of function object passed in. Must be callable like: fn(Task* task, IndexRange index_range)</td></tr>
    <tr><td class="paramname">S</td><td>Callable splitter, must be callable like: splitter(std::size_t count)</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>Start index for the range to be parallelized.</td></tr>
    <tr><td class="paramname">count</td><td><code>start</code> + count defines the end range.</td></tr>
    <tr><td class="paramname">splitter</td><td>Callable splitter, must be callable like: splitter(std::size_t count)</td></tr>
    <tr><td class="paramname">fn</td><td>Function object must be callable like: fn(Task* task, IndexRange index_range)</td></tr>
    <tr><td class="paramname">parent</td><td>Parent task to add this task as a child of.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new task holding the work of the parallel for. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__ext_8hpp_source.html#l00115">115</a> of file <a class="el" href="bf__job__ext_8hpp_source.html">bf_job_ext.hpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    {</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="namespacebf_1_1job.html#a34b82edd0c4dbead425152cf008ec532">taskMake</a>(</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>       [=, splitter = std::move(splitter), fn = std::move(fn)](<a class="code hl_struct" href="structbf_1_1job_1_1_task.html">Task</a>* <span class="keyword">const</span> task) {</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>         <span class="keywordflow">if</span> (count &gt; 1u &amp;&amp; splitter(count))</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>         {</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>           <span class="keyword">const</span> std::size_t left_count    = count / 2;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>           <span class="keyword">const</span> std::size_t right_count   = count - left_count;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>           <span class="keyword">const</span> <a class="code hl_enumeration" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a>   parent_q_type = <a class="code hl_function" href="namespacebf_1_1job_1_1detail.html#a4d4666e8dba3d32e395eb701d243c0cb">detail::taskQType</a>(task);</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>           <span class="keywordflow">if</span> (left_count)</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>           {</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>             <a class="code hl_function" href="namespacebf_1_1job.html#a9d8571034c2aff8664cbffc8de3e9d22">taskSubmit</a>(<a class="code hl_function" href="namespacebf_1_1job.html#ada994a5d80a85361eb84532b8a098b70">parallel_for</a>(start, left_count, splitter, fn, task), parent_q_type);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>           }</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span> </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>           <span class="keywordflow">if</span> (right_count)</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>           {</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>             <a class="code hl_function" href="namespacebf_1_1job.html#a9d8571034c2aff8664cbffc8de3e9d22">taskSubmit</a>(<a class="code hl_function" href="namespacebf_1_1job.html#ada994a5d80a85361eb84532b8a098b70">parallel_for</a>(start + left_count, right_count, splitter, fn, task), parent_q_type);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>           }</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>         }</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>         <span class="keywordflow">else</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>         {</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>           fn(task, IndexRange{start, start + count});</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>         }</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>       },</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>       parent);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    }</div>
<div class="ttc" id="anamespacebf_1_1job_1_1detail_html_a4d4666e8dba3d32e395eb701d243c0cb"><div class="ttname"><a href="namespacebf_1_1job_1_1detail.html#a4d4666e8dba3d32e395eb701d243c0cb">bf::job::detail::taskQType</a></div><div class="ttdeci">QueueType taskQType(const Task *task) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00326">bf_job_system.cpp:326</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a1bf27cadcb5355b162b1fb2af1978dc9"><div class="ttname"><a href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">bf::job::QueueType</a></div><div class="ttdeci">QueueType</div><div class="ttdoc">The priority that you want a task to run at.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__api_8hpp_source.html#l00043">bf_job_api.hpp:44</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a34b82edd0c4dbead425152cf008ec532"><div class="ttname"><a href="namespacebf_1_1job.html#a34b82edd0c4dbead425152cf008ec532">bf::job::taskMake</a></div><div class="ttdeci">Task * taskMake(TaskFn function, Task *const parent=nullptr) noexcept</div><div class="ttdoc">Creates a new Task that should be later submitted by calling 'taskSubmit'.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00524">bf_job_system.cpp:524</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_a9d8571034c2aff8664cbffc8de3e9d22"><div class="ttname"><a href="namespacebf_1_1job.html#a9d8571034c2aff8664cbffc8de3e9d22">bf::job::taskSubmit</a></div><div class="ttdeci">Task * taskSubmit(Task *const self, QueueType queue=QueueType::NORMAL) noexcept</div><div class="ttdoc">Submits the task to the specified queue.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00600">bf_job_system.cpp:600</a></div></div>
<div class="ttc" id="anamespacebf_1_1job_html_ada994a5d80a85361eb84532b8a098b70"><div class="ttname"><a href="namespacebf_1_1job.html#ada994a5d80a85361eb84532b8a098b70">bf::job::parallel_for</a></div><div class="ttdeci">Task * parallel_for(T *const data, const std::size_t count, S &amp;&amp;splitter, F &amp;&amp;fn, Task *parent=nullptr)</div><div class="ttdoc">Parallel for algorithm, splits the work up recursively spliting based on the splitter passed in.</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__ext_8hpp_source.html#l00212">bf_job_ext.hpp:212</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__ext_8hpp_source.html#l00115">parallel_for()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00524">taskMake()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00326">bf::job::detail::taskQType()</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00600">taskSubmit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bf__job__ext_8hpp_source.html#l00115">parallel_for()</a>.</p>

</div>
</div>
<a id="ada994a5d80a85361eb84532b8a098b70" name="ada994a5d80a85361eb84532b8a098b70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada994a5d80a85361eb84532b8a098b70">&#9670;&nbsp;</a></span>parallel_for() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , typename F , typename S &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> * bf::job::parallel_for </td>
          <td>(</td>
          <td class="paramtype">T *const&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">S &amp;&amp;&#160;</td>
          <td class="paramname"><em>splitter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F &amp;&amp;&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parallel for algorithm, splits the work up recursively spliting based on the <code>splitter</code> passed in. </p>
<p >Assumes all callables passed in are thread safe.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">F</td><td>Type of function object passed in. Must be callable like: fn(Task* task, IndexRange index_range)</td></tr>
    <tr><td class="paramname">S</td><td>Callable splitter, must be callable like: splitter(std::size_t count)</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>Start index for the range to be parallelized.</td></tr>
    <tr><td class="paramname">count</td><td><code>start</code> + count defines the end range.</td></tr>
    <tr><td class="paramname">splitter</td><td>Callable splitter, must be callable like: splitter(std::size_t count)</td></tr>
    <tr><td class="paramname">fn</td><td>Function object must be callable like: fn(Task* task, IndexRange index_range)</td></tr>
    <tr><td class="paramname">parent</td><td>Parent task to add this task as a child of.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new task holding the work of the parallel for.</dd></dl>
<p>Parallel for algorithm, splits the work up recursively spliting based on the <code>splitter</code> passed in. This version is a helper for array data.</p>
<p >Assumes all callables passed in are thread safe.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Type of the array to process.</td></tr>
    <tr><td class="paramname">F</td><td>Type of function object passed in. Must be callable like: fn(Task* task, IndexRange index_range)</td></tr>
    <tr><td class="paramname">S</td><td>Callable splitter, must be callable like: splitter(std::size_t count)</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The start of the array to process.</td></tr>
    <tr><td class="paramname">count</td><td>The number of elements in the <code>data</code> array.</td></tr>
    <tr><td class="paramname">splitter</td><td>Callable splitter, must be callable like: splitter(std::size_t count)</td></tr>
    <tr><td class="paramname">fn</td><td>Function object must be callable like: fn(Task* task, IndexRange index_range)</td></tr>
    <tr><td class="paramname">parent</td><td>Parent task to add this task as a child of.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new task holding the work of the parallel for. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__ext_8hpp_source.html#l00212">212</a> of file <a class="el" href="bf__job__ext_8hpp_source.html">bf_job_ext.hpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    {</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="namespacebf_1_1job.html#ada994a5d80a85361eb84532b8a098b70">parallel_for</a>(</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>       std::size_t(0), count, std::move(splitter), [data, fn = std::move(fn)](<a class="code hl_struct" href="structbf_1_1job_1_1_task.html">Task</a>* <span class="keyword">const</span> task, <span class="keyword">const</span> <a class="code hl_struct" href="structbf_1_1job_1_1_index_range.html">IndexRange</a> index_range) {</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>         fn(task, data + index_range.<a class="code hl_variable" href="structbf_1_1job_1_1_index_range.html#a319172078b2589e69ddda0c2f811eb37">idx_bgn</a>, index_range.<a class="code hl_function" href="structbf_1_1job_1_1_index_range.html#a22a061c0355f3beb8f1c1860c906bbb7">length</a>());</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>       },</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>       parent);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    }</div>
<div class="ttc" id="astructbf_1_1job_1_1_index_range_html"><div class="ttname"><a href="structbf_1_1job_1_1_index_range.html">bf::job::IndexRange</a></div><div class="ttdef"><b>Definition:</b> <a href="bf__job__ext_8hpp_source.html#l00041">bf_job_ext.hpp:42</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_index_range_html_a22a061c0355f3beb8f1c1860c906bbb7"><div class="ttname"><a href="structbf_1_1job_1_1_index_range.html#a22a061c0355f3beb8f1c1860c906bbb7">bf::job::IndexRange::length</a></div><div class="ttdeci">std::size_t length() const</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__ext_8hpp_source.html#l00046">bf_job_ext.hpp:46</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_index_range_html_a319172078b2589e69ddda0c2f811eb37"><div class="ttname"><a href="structbf_1_1job_1_1_index_range.html#a319172078b2589e69ddda0c2f811eb37">bf::job::IndexRange::idx_bgn</a></div><div class="ttdeci">std::size_t idx_bgn</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__ext_8hpp_source.html#l00043">bf_job_ext.hpp:43</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__ext_8hpp_source.html#l00043">bf::job::IndexRange::idx_bgn</a>, <a class="el" href="bf__job__ext_8hpp_source.html#l00046">bf::job::IndexRange::length()</a>, and <a class="el" href="bf__job__ext_8hpp_source.html#l00115">parallel_for()</a>.</p>

</div>
</div>
<a id="a008a5ea3f69205f8c2dd07d4645f344e" name="a008a5ea3f69205f8c2dd07d4645f344e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a008a5ea3f69205f8c2dd07d4645f344e">&#9670;&nbsp;</a></span>parallel_invoke()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename... F&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> * bf::job::parallel_invoke </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F &amp;&amp;...&#160;</td>
          <td class="paramname"><em>fns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invokes each passed in function object in parallel. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">...F</td><td>The function objects types. Must be callable like: fn(Task* task)</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>Parent task to add this task as a child of.</td></tr>
    <tr><td class="paramname">...fns</td><td>Function objects must be callable like: fn(Task* task)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new task holding the work of the parallel invoke. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bf__job__ext_8hpp_source.html#l00239">239</a> of file <a class="el" href="bf__job__ext_8hpp_source.html">bf_job_ext.hpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    {</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="namespacebf_1_1job.html#a34b82edd0c4dbead425152cf008ec532">taskMake</a>(</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>       [=](<a class="code hl_struct" href="structbf_1_1job_1_1_task.html">Task</a>* <span class="keyword">const</span> parent_task) <span class="keyword">mutable</span> {</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>         <span class="keyword">const</span> <a class="code hl_enumeration" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a> parent_q_type = <a class="code hl_function" href="namespacebf_1_1job_1_1detail.html#a4d4666e8dba3d32e395eb701d243c0cb">detail::taskQType</a>(parent_task);</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>         (<a class="code hl_function" href="namespacebf_1_1job.html#a9d8571034c2aff8664cbffc8de3e9d22">taskSubmit</a>(<a class="code hl_function" href="namespacebf_1_1job.html#a34b82edd0c4dbead425152cf008ec532">taskMake</a>(std::move(fns), parent_task), parent_q_type), ...);</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>       },</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>       parent);</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00524">taskMake()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00326">bf::job::detail::taskQType()</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00600">taskSubmit()</a>.</p>

</div>
</div>
<a id="a3d19ffe37dfe4b108e49920545957912" name="a3d19ffe37dfe4b108e49920545957912"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d19ffe37dfe4b108e49920545957912">&#9670;&nbsp;</a></span>taskPtrToPointer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structbf_1_1job_1_1_task.html">Task</a> * bf::job::taskPtrToPointer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task_ptr.html">TaskPtr</a>&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00950">950</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>    {</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>      <span class="keywordflow">if</span> (!ptr.<a class="code hl_function" href="structbf_1_1job_1_1_task_ptr.html#a22db6d339b844dc7c346078a00d80198">isNull</a>())</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>      {</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>        <a class="code hl_struct" href="structbf_1_1job_1_1_thread_worker.html">ThreadWorker</a>* <span class="keyword">const</span> worker = s_JobCtx.workers + ptr.<a class="code hl_variable" href="structbf_1_1job_1_1_task_ptr.html#a5e92de25b0c9c3a5190962661a76b4d4">worker_id</a>;</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>        <a class="code hl_struct" href="structbf_1_1job_1_1_task.html">Task</a>* <span class="keyword">const</span>         result = worker-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_thread_worker.html#a9f8c9e6968be8af401d89019c153a214">task_memory</a>.fromIndex(ptr.<a class="code hl_variable" href="structbf_1_1job_1_1_task_ptr.html#a090e2aa31aa059aa94ae96b15d01b8f5">task_index</a>);</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span> </div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>        <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(ptr.<a class="code hl_variable" href="structbf_1_1job_1_1_task_ptr.html#a5e92de25b0c9c3a5190962661a76b4d4">worker_id</a> == result-&gt;<a class="code hl_variable" href="structbf_1_1job_1_1_task.html#a4b5419369be19ab2535809796bf25b83">owning_worker</a>, <span class="stringliteral">&quot;Corrupted worker ID.&quot;</span>);</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span> </div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>        <span class="keywordflow">return</span> result;</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>      }</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span> </div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>    }</div>
<div class="ttc" id="astructbf_1_1job_1_1_task_ptr_html_a090e2aa31aa059aa94ae96b15d01b8f5"><div class="ttname"><a href="structbf_1_1job_1_1_task_ptr.html#a090e2aa31aa059aa94ae96b15d01b8f5">bf::job::TaskPtr::task_index</a></div><div class="ttdeci">TaskHandle task_index</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00116">bf_job_system.cpp:116</a></div></div>
<div class="ttc" id="astructbf_1_1job_1_1_task_ptr_html_a5e92de25b0c9c3a5190962661a76b4d4"><div class="ttname"><a href="structbf_1_1job_1_1_task_ptr.html#a5e92de25b0c9c3a5190962661a76b4d4">bf::job::TaskPtr::worker_id</a></div><div class="ttdeci">WorkerID worker_id</div><div class="ttdef"><b>Definition:</b> <a href="bf__job__system_8cpp_source.html#l00115">bf_job_system.cpp:115</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00085">JobAssert</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00168">bf::job::Task::owning_worker</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00259">bf::job::ThreadWorker::task_memory</a>.</p>

<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00728">bf::job::Task::onFinish()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00877">bf::job::ThreadWorker::run()</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00475">tick()</a>.</p>

</div>
</div>
<a id="a8fb4aaef1245850e67605cbd69222b00" name="a8fb4aaef1245850e67605cbd69222b00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fb4aaef1245850e67605cbd69222b00">&#9670;&nbsp;</a></span>initThreadWorkerID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bf::job::initThreadWorkerID </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00965">965</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>    {</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>      s_ThreadLocalIndex = s_NextThreadLocalIndex++;</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span> </div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>      <a class="code hl_define" href="bf__job__system_8cpp.html#a3c45a50fae3515f1fa7aa7def616e68f">JobAssert</a>(s_ThreadLocalIndex &lt; s_NextThreadLocalIndex, <span class="stringliteral">&quot;Something went very wrong if this is not true.&quot;</span>);</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00085">JobAssert</a>.</p>

<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00765">bf::job::ThreadWorker::start()</a>.</p>

</div>
</div>
<a id="a291d4a5da74e434cc85514cca213ec72" name="a291d4a5da74e434cc85514cca213ec72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a291d4a5da74e434cc85514cca213ec72">&#9670;&nbsp;</a></span>clampThreadCount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a> bf::job::clampThreadCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00342">342</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    {</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>      <span class="keywordflow">return</span> std::min(std::max(min, value), max);</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00393">initialize()</a>.</p>

</div>
</div>
<a id="a26d9d7e71f60828db101a6e8ba474741" name="a26d9d7e71f60828db101a6e8ba474741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26d9d7e71f60828db101a6e8ba474741">&#9670;&nbsp;</a></span>taskSubmitQPushHelper()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a> &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bf::job::taskSubmitQPushHelper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbf_1_1job_1_1_task.html">Task</a> *const&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a>&#160;</td>
          <td class="paramname"><em>worker_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a> &amp;&#160;</td>
          <td class="paramname"><em>queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00586">586</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    {</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span>          is_main_thread = worker_id == <a class="code hl_variable" href="namespacebf_1_1job.html#a6525dfa22a68b1011e5ef1e86be52b75">k_MainThreadID</a>;</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>      <a class="code hl_struct" href="structbf_1_1job_1_1_thread_worker.html">ThreadWorker</a>* <span class="keyword">const</span> worker         = s_JobCtx.workers + worker_id;</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>      <span class="keyword">const</span> <a class="code hl_struct" href="structbf_1_1job_1_1_task_ptr.html">TaskPtr</a>       task_ptr       = <span class="keyword">self</span>-&gt;toTaskPtr();</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span> </div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>      <span class="comment">// Loop until we have successfully pushed to the queue.</span></div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>      <span class="keywordflow">while</span> (!queue.push(task_ptr))</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>      {</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>        <span class="comment">// If we could not push to the queues then just do some work.</span></div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>        worker-&gt;<a class="code hl_function" href="structbf_1_1job_1_1_thread_worker.html#a78345f493b2b89d08ddd2ea9096356ca">run</a>(is_main_thread);</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>      }</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bf__job__system_8cpp_source.html#l00096">k_MainThreadID</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00877">bf::job::ThreadWorker::run()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00600">taskSubmit()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a494b3014635f3e97c1fdf626b236117b" name="a494b3014635f3e97c1fdf626b236117b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a494b3014635f3e97c1fdf626b236117b">&#9670;&nbsp;</a></span>k_MainQueueSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr std::size_t bf::job::k_MainQueueSize = 128</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of tasks that can be contained in the main queue. </p>

<p class="definition">Definition at line <a class="el" href="bf__job__config_8hpp_source.html#l00034">34</a> of file <a class="el" href="bf__job__config_8hpp_source.html">bf_job_config.hpp</a>.</p>

</div>
</div>
<a id="a9ec37950a885a28333f4a56868b9a07b" name="a9ec37950a885a28333f4a56868b9a07b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ec37950a885a28333f4a56868b9a07b">&#9670;&nbsp;</a></span>k_NormalQueueSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr std::size_t bf::job::k_NormalQueueSize = 4096</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of tasks that can be contained in each worker's high priority queue. </p>

<p class="definition">Definition at line <a class="el" href="bf__job__config_8hpp_source.html#l00035">35</a> of file <a class="el" href="bf__job__config_8hpp_source.html">bf_job_config.hpp</a>.</p>

</div>
</div>
<a id="acbbd94aff6cd64ac8fa998309592d8a2" name="acbbd94aff6cd64ac8fa998309592d8a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbbd94aff6cd64ac8fa998309592d8a2">&#9670;&nbsp;</a></span>k_BackgroundQueueSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr std::size_t bf::job::k_BackgroundQueueSize = 512</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of tasks that can be contained in each worker's low priority queue. </p>

<p class="definition">Definition at line <a class="el" href="bf__job__config_8hpp_source.html#l00036">36</a> of file <a class="el" href="bf__job__config_8hpp_source.html">bf_job_config.hpp</a>.</p>

</div>
</div>
<a id="a9f32cd8117952ffa2c8772faa3d9acd7" name="a9f32cd8117952ffa2c8772faa3d9acd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f32cd8117952ffa2c8772faa3d9acd7">&#9670;&nbsp;</a></span>k_MaxThreadsSupported</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr std::size_t bf::job::k_MaxThreadsSupported = 32</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The maximum number of threads that can be created, this is so that the library can be non dynamically allocating. </p>

<p class="definition">Definition at line <a class="el" href="bf__job__config_8hpp_source.html#l00037">37</a> of file <a class="el" href="bf__job__config_8hpp_source.html">bf_job_config.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00393">initialize()</a>.</p>

</div>
</div>
<a id="ae2f219351956ee01701e7652208a1757" name="ae2f219351956ee01701e7652208a1757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2f219351956ee01701e7652208a1757">&#9670;&nbsp;</a></span>k_ExpectedTaskSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr std::size_t bf::job::k_ExpectedTaskSize = std::max({std::size_t(128u), std::hardware_constructive_interference_size, std::hardware_destructive_interference_size})</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00094">94</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>

</div>
</div>
<a id="a632f29d428e3f8e61f50dc5b83724c98" name="a632f29d428e3f8e61f50dc5b83724c98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a632f29d428e3f8e61f50dc5b83724c98">&#9670;&nbsp;</a></span>k_MaxTasksPerWorker</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr std::size_t bf::job::k_MaxTasksPerWorker = <a class="el" href="namespacebf_1_1job.html#a9ec37950a885a28333f4a56868b9a07b">k_NormalQueueSize</a> + <a class="el" href="namespacebf_1_1job.html#acbbd94aff6cd64ac8fa998309592d8a2">k_BackgroundQueueSize</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00095">95</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00524">taskMake()</a>.</p>

</div>
</div>
<a id="a6525dfa22a68b1011e5ef1e86be52b75" name="a6525dfa22a68b1011e5ef1e86be52b75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6525dfa22a68b1011e5ef1e86be52b75">&#9670;&nbsp;</a></span>k_MainThreadID</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="namespacebf_1_1job.html#a578698ca919202a8ec0473dd4f6c5b81">WorkerID</a> bf::job::k_MainThreadID = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00096">96</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00393">initialize()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00877">bf::job::ThreadWorker::run()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00493">shutdown()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00586">taskSubmitQPushHelper()</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00475">tick()</a>.</p>

</div>
</div>
<a id="ac4743caff1b0745ed1704bae6e7d51d0" name="ac4743caff1b0745ed1704bae6e7d51d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4743caff1b0745ed1704bae6e7d51d0">&#9670;&nbsp;</a></span>k_InvalidQueueType</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a> bf::job::k_InvalidQueueType = <a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9">QueueType</a>(int(<a class="el" href="namespacebf_1_1job.html#a1bf27cadcb5355b162b1fb2af1978dc9a87ed58ce5596142e11cb65deb049bb4b">QueueType::BACKGROUND</a>) + 1)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00097">97</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00569">taskAddContinuation()</a>, <a class="el" href="bf__job__system_8cpp_source.html#l00600">taskSubmit()</a>, and <a class="el" href="bf__job__system_8cpp_source.html#l00663">waitOnTask()</a>.</p>

</div>
</div>
<a id="a2b89b0b4d5ea7b4eba8b638b9a21f564" name="a2b89b0b4d5ea7b4eba8b638b9a21f564"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b89b0b4d5ea7b4eba8b638b9a21f564">&#9670;&nbsp;</a></span>NullTaskHandle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="namespacebf_1_1job.html#a8950eddf68eeb5563079a6239f70652e">TaskHandle</a> bf::job::NullTaskHandle = std::numeric_limits&lt;<a class="el" href="namespacebf_1_1job.html#a8950eddf68eeb5563079a6239f70652e">TaskHandle</a>&gt;::max()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bf__job__system_8cpp_source.html#l00109">109</a> of file <a class="el" href="bf__job__system_8cpp_source.html">bf_job_system.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="bf__job__system_8cpp_source.html#l00132">bf::job::TaskPtr::isNull()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacebf.html">bf</a></li><li class="navelem"><a class="el" href="namespacebf_1_1job.html">job</a></li>
    <li class="footer">Generated on Wed Sep 21 2022 22:46:33 for BluFedora Job System by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
